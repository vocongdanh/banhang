"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/ai/[agentId]/chat/page",{

/***/ "(app-pages-browser)/./app/ai/[agentId]/chat/page.tsx":
/*!****************************************!*\
  !*** ./app/ai/[agentId]/chat/page.tsx ***!
  \****************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ ChatPage; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! styled-jsx/style */ \"(app-pages-browser)/./node_modules/styled-jsx/style.js\");\n/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(styled_jsx_style__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/./node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var _components_layout_app_shell__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/components/layout/app-shell */ \"(app-pages-browser)/./components/layout/app-shell.tsx\");\n/* harmony import */ var _components_ui_button__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/components/ui/button */ \"(app-pages-browser)/./components/ui/button.tsx\");\n/* harmony import */ var _components_ui_input__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/components/ui/input */ \"(app-pages-browser)/./components/ui/input.tsx\");\n/* harmony import */ var _components_ui_avatar__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/components/ui/avatar */ \"(app-pages-browser)/./components/ui/avatar.tsx\");\n/* harmony import */ var _components_ui_card__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/components/ui/card */ \"(app-pages-browser)/./components/ui/card.tsx\");\n/* harmony import */ var _components_ui_tooltip__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/components/ui/tooltip */ \"(app-pages-browser)/./components/ui/tooltip.tsx\");\n/* harmony import */ var _components_ui_scroll_area__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/components/ui/scroll-area */ \"(app-pages-browser)/./components/ui/scroll-area.tsx\");\n/* harmony import */ var _barrel_optimize_names_ArrowLeftIcon_ImageIcon_Loader2Icon_MicIcon_PaperclipIcon_RefreshCwIcon_SendIcon_lucide_react__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowLeftIcon,ImageIcon,Loader2Icon,MicIcon,PaperclipIcon,RefreshCwIcon,SendIcon!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/arrow-left.js\");\n/* harmony import */ var _barrel_optimize_names_ArrowLeftIcon_ImageIcon_Loader2Icon_MicIcon_PaperclipIcon_RefreshCwIcon_SendIcon_lucide_react__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowLeftIcon,ImageIcon,Loader2Icon,MicIcon,PaperclipIcon,RefreshCwIcon,SendIcon!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/refresh-cw.js\");\n/* harmony import */ var _barrel_optimize_names_ArrowLeftIcon_ImageIcon_Loader2Icon_MicIcon_PaperclipIcon_RefreshCwIcon_SendIcon_lucide_react__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowLeftIcon,ImageIcon,Loader2Icon,MicIcon,PaperclipIcon,RefreshCwIcon,SendIcon!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/loader-circle.js\");\n/* harmony import */ var _barrel_optimize_names_ArrowLeftIcon_ImageIcon_Loader2Icon_MicIcon_PaperclipIcon_RefreshCwIcon_SendIcon_lucide_react__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowLeftIcon,ImageIcon,Loader2Icon,MicIcon,PaperclipIcon,RefreshCwIcon,SendIcon!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/paperclip.js\");\n/* harmony import */ var _barrel_optimize_names_ArrowLeftIcon_ImageIcon_Loader2Icon_MicIcon_PaperclipIcon_RefreshCwIcon_SendIcon_lucide_react__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowLeftIcon,ImageIcon,Loader2Icon,MicIcon,PaperclipIcon,RefreshCwIcon,SendIcon!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/image.js\");\n/* harmony import */ var _barrel_optimize_names_ArrowLeftIcon_ImageIcon_Loader2Icon_MicIcon_PaperclipIcon_RefreshCwIcon_SendIcon_lucide_react__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowLeftIcon,ImageIcon,Loader2Icon,MicIcon,PaperclipIcon,RefreshCwIcon,SendIcon!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/mic.js\");\n/* harmony import */ var _barrel_optimize_names_ArrowLeftIcon_ImageIcon_Loader2Icon_MicIcon_PaperclipIcon_RefreshCwIcon_SendIcon_lucide_react__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowLeftIcon,ImageIcon,Loader2Icon,MicIcon,PaperclipIcon,RefreshCwIcon,SendIcon!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/send.js\");\n/* harmony import */ var _components_ui_use_toast__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @/components/ui/use-toast */ \"(app-pages-browser)/./components/ui/use-toast.tsx\");\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/link */ \"(app-pages-browser)/./node_modules/next/dist/api/link.js\");\n/* harmony import */ var _lib_api_client__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @/lib/api-client */ \"(app-pages-browser)/./lib/api-client.ts\");\n/* harmony import */ var react_markdown__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! react-markdown */ \"(app-pages-browser)/./node_modules/react-markdown/lib/index.js\");\n/* harmony import */ var remark_gfm__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! remark-gfm */ \"(app-pages-browser)/./node_modules/remark-gfm/lib/index.js\");\n/* harmony import */ var react_syntax_highlighter__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! react-syntax-highlighter */ \"(app-pages-browser)/./node_modules/react-syntax-highlighter/dist/esm/prism.js\");\n/* harmony import */ var react_syntax_highlighter_dist_esm_styles_prism__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! react-syntax-highlighter/dist/esm/styles/prism */ \"(app-pages-browser)/./node_modules/react-syntax-highlighter/dist/esm/styles/prism/tomorrow.js\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst markdownStyles = {\n    p: \"mb-4 leading-relaxed\",\n    h1: \"text-3xl font-bold mb-4\",\n    h2: \"text-2xl font-bold mb-3\",\n    h3: \"text-xl font-bold mb-2\",\n    h4: \"text-lg font-bold mb-2\",\n    h5: \"text-base font-bold mb-2\",\n    h6: \"text-sm font-bold mb-2\",\n    ul: \"list-disc pl-6 mb-4\",\n    ol: \"list-decimal pl-6 mb-4\",\n    li: \"mb-1\",\n    code: \"bg-gray-100 rounded px-1 py-0.5 font-mono text-sm\",\n    pre: \"bg-gray-100 rounded-lg p-4 mb-4 overflow-x-auto\",\n    blockquote: \"border-l-4 border-gray-300 pl-4 italic my-4\",\n    a: \"text-blue-600 hover:underline\",\n    table: \"min-w-full border-collapse mb-4\",\n    thead: \"bg-gray-100\",\n    th: \"border border-gray-300 px-4 py-2 text-left\",\n    td: \"border border-gray-300 px-4 py-2\"\n};\nconst markdownComponents = {\n    p: (param)=>{\n        let { children } = param;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n            className: markdownStyles.p,\n            children: children\n        }, void 0, false, {\n            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n            lineNumber: 81,\n            columnNumber: 24\n        }, undefined);\n    },\n    h1: (param)=>{\n        let { children } = param;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n            className: markdownStyles.h1,\n            children: children\n        }, void 0, false, {\n            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n            lineNumber: 82,\n            columnNumber: 25\n        }, undefined);\n    },\n    h2: (param)=>{\n        let { children } = param;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n            className: markdownStyles.h2,\n            children: children\n        }, void 0, false, {\n            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n            lineNumber: 83,\n            columnNumber: 25\n        }, undefined);\n    },\n    h3: (param)=>{\n        let { children } = param;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n            className: markdownStyles.h3,\n            children: children\n        }, void 0, false, {\n            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n            lineNumber: 84,\n            columnNumber: 25\n        }, undefined);\n    },\n    h4: (param)=>{\n        let { children } = param;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n            className: markdownStyles.h4,\n            children: children\n        }, void 0, false, {\n            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n            lineNumber: 85,\n            columnNumber: 25\n        }, undefined);\n    },\n    h5: (param)=>{\n        let { children } = param;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h5\", {\n            className: markdownStyles.h5,\n            children: children\n        }, void 0, false, {\n            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n            lineNumber: 86,\n            columnNumber: 25\n        }, undefined);\n    },\n    h6: (param)=>{\n        let { children } = param;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h6\", {\n            className: markdownStyles.h6,\n            children: children\n        }, void 0, false, {\n            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n            lineNumber: 87,\n            columnNumber: 25\n        }, undefined);\n    },\n    ul: (param)=>{\n        let { children } = param;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"ul\", {\n            className: markdownStyles.ul,\n            children: children\n        }, void 0, false, {\n            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n            lineNumber: 88,\n            columnNumber: 25\n        }, undefined);\n    },\n    ol: (param)=>{\n        let { children } = param;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"ol\", {\n            className: markdownStyles.ol,\n            children: children\n        }, void 0, false, {\n            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n            lineNumber: 89,\n            columnNumber: 25\n        }, undefined);\n    },\n    li: (param)=>{\n        let { children } = param;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n            className: markdownStyles.li,\n            children: children\n        }, void 0, false, {\n            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n            lineNumber: 90,\n            columnNumber: 25\n        }, undefined);\n    },\n    code: (param)=>{\n        let { node, inline, className, children, ...props } = param;\n        const match = /language-(\\w+)/.exec(className || \"\");\n        return !inline && match ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_syntax_highlighter__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n            style: react_syntax_highlighter_dist_esm_styles_prism__WEBPACK_IMPORTED_MODULE_15__[\"default\"],\n            language: match[1],\n            PreTag: \"div\",\n            ...props,\n            children: String(children).replace(/\\n$/, \"\")\n        }, void 0, false, {\n            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n            lineNumber: 94,\n            columnNumber: 7\n        }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"code\", {\n            className: markdownStyles.code,\n            ...props,\n            children: children\n        }, void 0, false, {\n            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n            lineNumber: 103,\n            columnNumber: 7\n        }, undefined);\n    },\n    pre: (param)=>{\n        let { children } = param;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"pre\", {\n            className: markdownStyles.pre,\n            children: children\n        }, void 0, false, {\n            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n            lineNumber: 108,\n            columnNumber: 26\n        }, undefined);\n    },\n    blockquote: (param)=>{\n        let { children } = param;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"blockquote\", {\n            className: markdownStyles.blockquote,\n            children: children\n        }, void 0, false, {\n            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n            lineNumber: 110,\n            columnNumber: 5\n        }, undefined);\n    },\n    a: (param)=>{\n        let { href, children } = param;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n            href: href,\n            className: markdownStyles.a,\n            target: \"_blank\",\n            rel: \"noopener noreferrer\",\n            children: children\n        }, void 0, false, {\n            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n            lineNumber: 113,\n            columnNumber: 5\n        }, undefined);\n    },\n    table: (param)=>{\n        let { children } = param;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"table\", {\n            className: markdownStyles.table,\n            children: children\n        }, void 0, false, {\n            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n            lineNumber: 117,\n            columnNumber: 28\n        }, undefined);\n    },\n    thead: (param)=>{\n        let { children } = param;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"thead\", {\n            className: markdownStyles.thead,\n            children: children\n        }, void 0, false, {\n            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n            lineNumber: 118,\n            columnNumber: 28\n        }, undefined);\n    },\n    th: (param)=>{\n        let { children } = param;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"th\", {\n            className: markdownStyles.th,\n            children: children\n        }, void 0, false, {\n            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n            lineNumber: 119,\n            columnNumber: 25\n        }, undefined);\n    },\n    td: (param)=>{\n        let { children } = param;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"td\", {\n            className: markdownStyles.td,\n            children: children\n        }, void 0, false, {\n            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n            lineNumber: 120,\n            columnNumber: 25\n        }, undefined);\n    }\n};\n// Component wrapper cho ReactMarkdown\nconst MarkdownContent = (param)=>{\n    let { content } = param;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"markdown-content\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_markdown__WEBPACK_IMPORTED_MODULE_16__.Markdown, {\n            remarkPlugins: [\n                remark_gfm__WEBPACK_IMPORTED_MODULE_17__[\"default\"]\n            ],\n            components: markdownComponents,\n            children: content\n        }, void 0, false, {\n            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n            lineNumber: 126,\n            columnNumber: 5\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n        lineNumber: 125,\n        columnNumber: 3\n    }, undefined);\n};\n_c = MarkdownContent;\nfunction ChatPage() {\n    var _process_env_NEXT_PUBLIC_API_URL, _agent_name, _process_env_NEXT_PUBLIC_API_URL1, _agent_name1, _agent_capabilities, _agent_capabilities1;\n    _s();\n    const params = (0,next_navigation__WEBPACK_IMPORTED_MODULE_3__.useParams)();\n    const router = (0,next_navigation__WEBPACK_IMPORTED_MODULE_3__.useRouter)();\n    const searchParams = (0,next_navigation__WEBPACK_IMPORTED_MODULE_3__.useSearchParams)();\n    const { toast } = (0,_components_ui_use_toast__WEBPACK_IMPORTED_MODULE_11__.useToast)();\n    const [agent, setAgent] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    const [conversation, setConversation] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)([]);\n    const [inputMessage, setInputMessage] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(true);\n    const [isSending, setIsSending] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [isNewConversation, setIsNewConversation] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [isLoggedIn, setIsLoggedIn] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [businessId, setBusinessId] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    const [files, setFiles] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)([]);\n    const messagesEndRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const fileInputRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const agentId = params === null || params === void 0 ? void 0 : params.agentId;\n    const conversationIdFromQuery = searchParams === null || searchParams === void 0 ? void 0 : searchParams.get(\"conversationId\");\n    if (!(params === null || params === void 0 ? void 0 : params.agentId)) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            children: \"Agent ID kh\\xf4ng hợp lệ\"\n        }, void 0, false, {\n            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n            lineNumber: 158,\n            columnNumber: 12\n        }, this);\n    }\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        // Check for login and get business ID\n        const token = localStorage.getItem(\"auth_token\");\n        setIsLoggedIn(!!token);\n        const currentBusinessId = (0,_lib_api_client__WEBPACK_IMPORTED_MODULE_13__.getBusinessId)();\n        if (currentBusinessId) {\n            setBusinessId(currentBusinessId);\n        }\n    }, []);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        if (isLoggedIn && businessId && agentId) {\n            console.log(\"Fetching agent details and conversation with:\", {\n                isLoggedIn,\n                businessId,\n                agentId,\n                conversationIdFromQuery\n            });\n            fetchAgentDetails();\n            if (conversationIdFromQuery) {\n                fetchMessages(conversationIdFromQuery);\n            } else {\n                fetchOrCreateConversation();\n            }\n        }\n    }, [\n        isLoggedIn,\n        businessId,\n        agentId,\n        conversationIdFromQuery\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        // Scroll to bottom when messages change\n        scrollToBottom();\n    }, [\n        messages\n    ]);\n    const scrollToBottom = ()=>{\n        var _messagesEndRef_current;\n        (_messagesEndRef_current = messagesEndRef.current) === null || _messagesEndRef_current === void 0 ? void 0 : _messagesEndRef_current.scrollIntoView({\n            behavior: \"smooth\"\n        });\n    };\n    // Disable eslint warning for missing dependencies\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    const fetchAgentDetails = async ()=>{\n        try {\n            const token = localStorage.getItem(\"auth_token\");\n            const apiUrl = \"http://localhost:8001/api\" || 0;\n            console.log(\"Fetching agent details:\", {\n                agentId,\n                apiUrl: \"\".concat(apiUrl, \"/ai-agents/\").concat(agentId)\n            });\n            const response = await fetch(\"\".concat(apiUrl, \"/ai-agents/\").concat(agentId), {\n                headers: {\n                    \"Authorization\": \"Bearer \".concat(token),\n                    \"Content-Type\": \"application/json\",\n                    \"Accept\": \"application/json\"\n                },\n                mode: \"cors\",\n                credentials: \"include\"\n            });\n            console.log(\"Agent details response status:\", response.status);\n            if (!response.ok) {\n                throw new Error(\"Failed to fetch agent details\");\n            }\n            const data = await response.json();\n            console.log(\"Agent data received:\", data);\n            setAgent(data.data);\n        } catch (error) {\n            console.error(\"Error fetching agent details:\", error);\n            toast({\n                title: \"Error\",\n                description: \"Failed to load AI agent. Please try again.\",\n                variant: \"destructive\"\n            });\n        }\n    };\n    const fetchOrCreateConversation = async ()=>{\n        setIsLoading(true);\n        try {\n            const token = localStorage.getItem(\"auth_token\");\n            const apiUrl = \"http://localhost:8001/api\" || 0;\n            console.log(\"Fetching existing conversations:\", {\n                agentId,\n                businessId,\n                url: \"\".concat(apiUrl, \"/ai-conversations?business_id=\").concat(businessId)\n            });\n            // Try to find an existing conversation with this agent\n            const responseExisting = await fetch(\"\".concat(apiUrl, \"/ai-conversations?business_id=\").concat(businessId), {\n                headers: {\n                    \"Authorization\": \"Bearer \".concat(token),\n                    \"Content-Type\": \"application/json\",\n                    \"Accept\": \"application/json\"\n                },\n                mode: \"cors\",\n                credentials: \"include\"\n            });\n            console.log(\"Existing conversations response status:\", responseExisting.status);\n            if (!responseExisting.ok) {\n                throw new Error(\"Failed to fetch conversations\");\n            }\n            const existingData = await responseExisting.json();\n            console.log(\"Existing conversations:\", existingData);\n            // If there's an existing conversation, use it\n            if (existingData.data && existingData.data.length > 0) {\n                // Lọc cuộc trò chuyện với agent hiện tại\n                const agentConversations = existingData.data.filter((conv)=>conv.ai_agent_id === agentId);\n                console.log(\"Agent conversations:\", agentConversations);\n                if (agentConversations.length > 0) {\n                    const conv = agentConversations[0]; // Lấy cuộc trò chuyện gần nhất\n                    setConversation(conv);\n                    await fetchMessages(conv.id);\n                    setIsNewConversation(false);\n                } else {\n                    // Không tìm thấy cuộc trò chuyện với agent này\n                    setIsNewConversation(true);\n                    setMessages([]);\n                }\n            } else {\n                // Otherwise create a new conversation\n                setIsNewConversation(true);\n                setMessages([]);\n            }\n        } catch (error) {\n            console.error(\"Error fetching/creating conversation:\", error);\n            toast({\n                title: \"Error\",\n                description: \"Failed to load conversation. Please try again.\",\n                variant: \"destructive\"\n            });\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    const fetchMessages = async (conversationId)=>{\n        try {\n            const token = localStorage.getItem(\"auth_token\");\n            const apiUrl = \"http://localhost:8001/api\" || 0;\n            console.log(\"Fetching messages for conversation:\", conversationId);\n            const response = await fetch(\"\".concat(apiUrl, \"/ai-conversations/\").concat(conversationId), {\n                headers: {\n                    \"Authorization\": \"Bearer \".concat(token),\n                    \"Content-Type\": \"application/json\",\n                    \"Accept\": \"application/json\"\n                },\n                mode: \"cors\",\n                credentials: \"include\"\n            });\n            console.log(\"Messages response status:\", response.status);\n            if (!response.ok) {\n                throw new Error(\"Failed to fetch messages\");\n            }\n            const data = await response.json();\n            console.log(\"Messages data:\", data);\n            // API có thể trả về cấu trúc khác nhau\n            if (data.messages) {\n                setMessages(data.messages);\n            } else if (data.data && data.data.messages) {\n                setMessages(data.data.messages);\n            } else {\n                console.error(\"Unexpected message data structure:\", data);\n                setMessages([]);\n            }\n        } catch (error) {\n            console.error(\"Error fetching messages:\", error);\n            toast({\n                title: \"Error\",\n                description: \"Failed to load messages. Please try again.\",\n                variant: \"destructive\"\n            });\n        }\n    };\n    const createNewConversation = async (initialMessage)=>{\n        try {\n            const token = localStorage.getItem(\"auth_token\");\n            const apiUrl = \"http://localhost:8001/api\" || 0;\n            console.log(\"Creating new conversation with:\", {\n                agentId,\n                businessId,\n                initialMessage,\n                apiUrl\n            });\n            const fullUrl = \"\".concat(apiUrl, \"/ai-conversations\");\n            console.log(\"POST request to:\", fullUrl);\n            const response = await fetch(fullUrl, {\n                method: \"POST\",\n                headers: {\n                    \"Authorization\": \"Bearer \".concat(token),\n                    \"Content-Type\": \"application/json\",\n                    \"Accept\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    ai_agent_id: agentId,\n                    business_id: businessId,\n                    initial_message: initialMessage\n                }),\n                mode: \"cors\",\n                credentials: \"include\"\n            });\n            console.log(\"Create conversation response status:\", response.status);\n            if (!response.ok) {\n                const errorText = await response.text();\n                console.error(\"Error creating conversation:\", errorText);\n                throw new Error(\"Failed to create conversation\");\n            }\n            const data = await response.json();\n            console.log(\"Conversation created successfully:\", data);\n            let conversationData;\n            if (data.data) {\n                conversationData = data.data;\n            } else {\n                conversationData = data;\n            }\n            setConversation(conversationData);\n            if (conversationData.id) {\n                await fetchMessages(conversationData.id);\n                setIsNewConversation(false);\n                // Clear input message after creating conversation\n                setInputMessage(\"\");\n                return conversationData.id;\n            }\n            return null;\n        } catch (error) {\n            console.error(\"Error creating conversation:\", error);\n            toast({\n                title: \"Error\",\n                description: \"Failed to create conversation. Please try again.\",\n                variant: \"destructive\"\n            });\n            return null;\n        }\n    };\n    const sendMessage = async ()=>{\n        if (!inputMessage.trim() && files.length === 0) return;\n        setIsSending(true);\n        try {\n            var _prepareData_message;\n            const token = localStorage.getItem(\"auth_token\");\n            const apiUrl = \"http://localhost:8001/api\" || 0;\n            let conversationId = conversation === null || conversation === void 0 ? void 0 : conversation.id;\n            // Check if we have a conversation or need to create one\n            if (!conversationId) {\n                await createNewConversation(inputMessage);\n                if (!conversationId) {\n                    throw new Error(\"Failed to create conversation\");\n                }\n                // Reset input after creating conversation\n                setInputMessage(\"\");\n                setFiles([]);\n                setIsSending(false);\n                return;\n            }\n            // Create a temporary user message to display immediately\n            const userMessage = {\n                id: \"temp-\".concat(Date.now()),\n                ai_conversation_id: conversationId,\n                role: \"user\",\n                content: inputMessage,\n                is_read: true,\n                created_at: new Date().toISOString()\n            };\n            // Create a temporary assistant message with loading state\n            const tempAssistantMessage = {\n                id: \"temp-response-\".concat(Date.now()),\n                ai_conversation_id: conversationId,\n                role: \"assistant\",\n                content: \"\",\n                is_read: false,\n                created_at: new Date().toISOString(),\n                loading: true\n            };\n            // Add temporary messages to the UI\n            setMessages((prev)=>[\n                    ...prev,\n                    userMessage,\n                    tempAssistantMessage\n                ]);\n            // Prepare form data for the request\n            const formData = new FormData();\n            formData.append(\"content\", inputMessage);\n            // Add files if any\n            if (files.length > 0) {\n                console.log(\"Adding files to request:\", files.length);\n                files.forEach((file)=>{\n                    formData.append(\"files[]\", file);\n                });\n            }\n            // Clear input and files\n            setInputMessage(\"\");\n            setFiles([]);\n            // Step 1: First send the message to the stream-prepare endpoint to get a token\n            const prepareResponse = await fetch(\"\".concat(apiUrl, \"/ai-conversations/\").concat(conversationId, \"/messages/stream-prepare\"), {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Authorization\": \"Bearer \".concat(token)\n                },\n                body: JSON.stringify({\n                    content: inputMessage\n                })\n            });\n            if (!prepareResponse.ok) {\n                throw new Error(\"Failed to prepare streaming session\");\n            }\n            const prepareData = await prepareResponse.json();\n            const streamToken = prepareData.stream_token;\n            if (!streamToken) {\n                throw new Error(\"No stream token received\");\n            }\n            // Step 2: Use the stream token to connect to the streaming endpoint\n            const streamUrl = \"\".concat(apiUrl, \"/ai-direct-stream/\").concat(streamToken);\n            console.log(\"Connecting to streaming URL:\", streamUrl);\n            // Create Event Source for SSE (Server-Sent Events)\n            const eventSource = new EventSource(streamUrl);\n            console.log(\"EventSource created\");\n            // Handle connection open\n            eventSource.onopen = (event)=>{\n                console.log(\"EventSource connection opened:\", event);\n            };\n            let realUserMessageId = ((_prepareData_message = prepareData.message) === null || _prepareData_message === void 0 ? void 0 : _prepareData_message.id) || \"\";\n            let realAssistantMessageId = \"\";\n            // Set the user message with the actual ID from the server\n            if (prepareData.message) {\n                setMessages((prev)=>prev.map((msg)=>msg.id === userMessage.id ? {\n                            ...prepareData.message\n                        } : msg));\n            }\n            // Handle stream events\n            eventSource.onmessage = (event)=>{\n                console.log(\"Stream event received:\", event.data);\n                if (event.data === \"[DONE]\") {\n                    console.log(\"Stream complete, closing connection\");\n                    eventSource.close();\n                    // Cập nhật trạng thái loading khi hoàn thành\n                    setMessages((prev)=>prev.map((msg)=>msg.id === tempAssistantMessage.id ? {\n                                ...msg,\n                                loading: false\n                            } : msg));\n                    setIsSending(false);\n                    return;\n                }\n                try {\n                    const data = JSON.parse(event.data);\n                    console.log(\"Parsed stream data:\", data);\n                    // Handle data from direct streaming endpoint\n                    if (data.type === \"chunk\") {\n                        console.log(\"Text chunk received:\", data.content);\n                        // Hiển thị ngay lập tức từng chunk text\n                        setMessages((prev)=>{\n                            const updatedMessages = prev.map((msg)=>{\n                                if (msg.id === tempAssistantMessage.id) {\n                                    return {\n                                        ...msg,\n                                        content: msg.content + data.content\n                                    };\n                                }\n                                return msg;\n                            });\n                            return updatedMessages;\n                        });\n                        return;\n                    }\n                    // Handle completion event from Assistants API\n                    if (data.type === \"complete\") {\n                        console.log(\"Streaming complete, waiting for message ID\");\n                        // We'll keep the message as is until we get the message_saved event\n                        return;\n                    }\n                    // Handle saved message with ID from the backend\n                    if (data.type === \"message_saved\" && data.message_id) {\n                        console.log(\"Message saved with ID:\", data.message_id);\n                        // Update our temporary message with the real one from the database\n                        setMessages((prev)=>prev.map((msg)=>msg.id === tempAssistantMessage.id ? {\n                                    ...msg,\n                                    id: data.message_id,\n                                    loading: false\n                                } : msg));\n                        setIsSending(false);\n                        return;\n                    }\n                    // Handle error event\n                    if (data.type === \"error\") {\n                        console.error(\"Error received:\", data.message || data.error);\n                        toast({\n                            title: \"Error\",\n                            description: data.message || data.error || \"An error occurred while processing your message.\",\n                            variant: \"destructive\"\n                        });\n                        // Update the assistant message to show error\n                        setMessages((prev)=>prev.map((msg)=>msg.id === tempAssistantMessage.id ? {\n                                    ...msg,\n                                    content: data.message || \"Xin lỗi, đ\\xe3 xảy ra lỗi khi xử l\\xfd tin nhắn.\",\n                                    loading: false\n                                } : msg));\n                        setIsSending(false);\n                        return;\n                    }\n                } catch (err) {\n                    console.error(\"Error processing stream event:\", err);\n                }\n            };\n            eventSource.onerror = (error)=>{\n                var _error_target;\n                console.error(\"EventSource error:\", error);\n                // Check if the error is due to the user not being authenticated\n                if (error instanceof Event && ((_error_target = error.target) === null || _error_target === void 0 ? void 0 : _error_target.readyState) === EventSource.CLOSED) {\n                    console.error(\"EventSource connection closed\");\n                }\n                eventSource.close();\n                setIsSending(false);\n                toast({\n                    title: \"Connection Error\",\n                    description: \"Could not establish streaming connection. Please try again.\",\n                    variant: \"destructive\"\n                });\n                // Update the assistant message to show error\n                setMessages((prev)=>prev.map((msg)=>msg.id === tempAssistantMessage.id ? {\n                            ...msg,\n                            content: \"Kh\\xf4ng thể kết nối tới m\\xe1y chủ. Vui l\\xf2ng thử lại sau hoặc đăng nhập lại.\",\n                            loading: false\n                        } : msg));\n            };\n        } catch (error) {\n            console.error(\"Error sending message:\", error);\n            setIsSending(false);\n            toast({\n                title: \"Error\",\n                description: \"Failed to send message. Please try again.\",\n                variant: \"destructive\"\n            });\n        }\n    };\n    const handleKeyDown = (e)=>{\n        console.log(\"Key down event:\", e.key);\n        if (e.key === \"Enter\" && !e.shiftKey) {\n            e.preventDefault();\n            console.log(\"Enter key pressed (without shift)\");\n            sendMessage();\n        }\n    };\n    const handleFileClick = ()=>{\n        var _fileInputRef_current;\n        console.log(\"File button clicked\");\n        (_fileInputRef_current = fileInputRef.current) === null || _fileInputRef_current === void 0 ? void 0 : _fileInputRef_current.click();\n    };\n    const handleFileChange = (e)=>{\n        console.log(\"File input changed\");\n        if (e.target.files) {\n            const newFiles = Array.from(e.target.files);\n            console.log(\"Selected files:\", newFiles.map((f)=>f.name));\n            setFiles((prev)=>[\n                    ...prev,\n                    ...newFiles\n                ]);\n        }\n    };\n    const removeFile = (index)=>{\n        console.log(\"Removing file at index:\", index);\n        setFiles((prev)=>prev.filter((_, i)=>i !== index));\n    };\n    const formatTime = (dateString)=>{\n        const date = new Date(dateString);\n        return date.toLocaleTimeString([], {\n            hour: \"2-digit\",\n            minute: \"2-digit\"\n        });\n    };\n    if (!isLoggedIn) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_layout_app_shell__WEBPACK_IMPORTED_MODULE_4__.AppShell, {\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"container mx-auto py-6\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"p-8 bg-yellow-50 border border-yellow-300 rounded-md\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                            className: \"text-lg font-semibold mb-2\",\n                            children: \"Bạn cần đăng nhập trước\"\n                        }, void 0, false, {\n                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                            lineNumber: 690,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            children: [\n                                \"Vui l\\xf2ng \",\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                    href: \"/login\",\n                                    className: \"text-blue-600 hover:underline\",\n                                    children: \"đăng nhập\"\n                                }, void 0, false, {\n                                    fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                    lineNumber: 691,\n                                    columnNumber: 25\n                                }, this),\n                                \" để sử dụng t\\xednh năng n\\xe0y.\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                            lineNumber: 691,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                    lineNumber: 689,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                lineNumber: 688,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n            lineNumber: 687,\n            columnNumber: 7\n        }, this);\n    }\n    if (!businessId) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_layout_app_shell__WEBPACK_IMPORTED_MODULE_4__.AppShell, {\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"container mx-auto py-6\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"p-8 bg-yellow-50 border border-yellow-300 rounded-md\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                            className: \"text-lg font-semibold mb-2\",\n                            children: \"Chọn doanh nghiệp\"\n                        }, void 0, false, {\n                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                            lineNumber: 703,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            children: \"Vui l\\xf2ng chọn một doanh nghiệp để chat với AI Agent.\"\n                        }, void 0, false, {\n                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                            lineNumber: 704,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                    lineNumber: 702,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                lineNumber: 701,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n            lineNumber: 700,\n            columnNumber: 7\n        }, this);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_layout_app_shell__WEBPACK_IMPORTED_MODULE_4__.AppShell, {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default()), {\n                id: \"ce13646027efefd5\",\n                dynamic: [\n                    markdownStyles\n                ],\n                children: \".typing-indicator{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.typing-indicator span{height:8px;width:8px;background:currentColor;opacity:.6;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;margin:0 2px;-webkit-animation:bounce 1.5s infinite ease-in-out;-moz-animation:bounce 1.5s infinite ease-in-out;-o-animation:bounce 1.5s infinite ease-in-out;animation:bounce 1.5s infinite ease-in-out}.typing-indicator span:nth-child(1){-webkit-animation-delay:0s;-moz-animation-delay:0s;-o-animation-delay:0s;animation-delay:0s}.typing-indicator span:nth-child(2){-webkit-animation-delay:.2s;-moz-animation-delay:.2s;-o-animation-delay:.2s;animation-delay:.2s}.typing-indicator span:nth-child(3){-webkit-animation-delay:.4s;-moz-animation-delay:.4s;-o-animation-delay:.4s;animation-delay:.4s}@-webkit-keyframes bounce{0%,60%,100%{-webkit-transform:translatey(0);transform:translatey(0)}30%{-webkit-transform:translatey(-4px);transform:translatey(-4px)}}@-moz-keyframes bounce{0%,60%,100%{-moz-transform:translatey(0);transform:translatey(0)}30%{-moz-transform:translatey(-4px);transform:translatey(-4px)}}@-o-keyframes bounce{0%,60%,100%{-o-transform:translatey(0);transform:translatey(0)}30%{-o-transform:translatey(-4px);transform:translatey(-4px)}}@keyframes bounce{0%,60%,100%{-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}30%{-webkit-transform:translatey(-4px);-moz-transform:translatey(-4px);-o-transform:translatey(-4px);transform:translatey(-4px)}}\".concat(markdownStyles, \"\\n      \")\n            }, void 0, false, void 0, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                    [\n                        \"ce13646027efefd5\",\n                        [\n                            markdownStyles\n                        ]\n                    ]\n                ]) + \" \" + \"flex flex-col h-[calc(100vh-4rem)]\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                            [\n                                \"ce13646027efefd5\",\n                                [\n                                    markdownStyles\n                                ]\n                            ]\n                        ]) + \" \" + \"border-b p-4 flex justify-between items-center\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                    [\n                                        \"ce13646027efefd5\",\n                                        [\n                                            markdownStyles\n                                        ]\n                                    ]\n                                ]) + \" \" + \"flex items-center gap-3\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_5__.Button, {\n                                        variant: \"ghost\",\n                                        className: \"mr-1 p-2 h-9 w-9\",\n                                        asChild: true,\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_link__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n                                            href: \"/ai\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowLeftIcon_ImageIcon_Loader2Icon_MicIcon_PaperclipIcon_RefreshCwIcon_SendIcon_lucide_react__WEBPACK_IMPORTED_MODULE_18__[\"default\"], {\n                                                className: \"h-4 w-4\"\n                                            }, void 0, false, {\n                                                fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                lineNumber: 758,\n                                                columnNumber: 17\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                            lineNumber: 757,\n                                            columnNumber: 15\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                        lineNumber: 756,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_avatar__WEBPACK_IMPORTED_MODULE_7__.Avatar, {\n                                        className: \"h-9 w-9\",\n                                        children: (agent === null || agent === void 0 ? void 0 : agent.avatar) ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_avatar__WEBPACK_IMPORTED_MODULE_7__.AvatarImage, {\n                                            src: agent.avatar.startsWith(\"http\") ? agent.avatar : \"\".concat((_process_env_NEXT_PUBLIC_API_URL = \"http://localhost:8001/api\") === null || _process_env_NEXT_PUBLIC_API_URL === void 0 ? void 0 : _process_env_NEXT_PUBLIC_API_URL.replace(\"/api\", \"\"), \"/storage/\").concat(agent.avatar),\n                                            alt: (agent === null || agent === void 0 ? void 0 : agent.name) || \"AI Agent\"\n                                        }, void 0, false, {\n                                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                            lineNumber: 764,\n                                            columnNumber: 17\n                                        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_avatar__WEBPACK_IMPORTED_MODULE_7__.AvatarFallback, {\n                                            children: (agent === null || agent === void 0 ? void 0 : (_agent_name = agent.name) === null || _agent_name === void 0 ? void 0 : _agent_name.substring(0, 2).toUpperCase()) || \"AI\"\n                                        }, void 0, false, {\n                                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                            lineNumber: 771,\n                                            columnNumber: 17\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                        lineNumber: 762,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                            [\n                                                \"ce13646027efefd5\",\n                                                [\n                                                    markdownStyles\n                                                ]\n                                            ]\n                                        ]),\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                                                className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                                    [\n                                                        \"ce13646027efefd5\",\n                                                        [\n                                                            markdownStyles\n                                                        ]\n                                                    ]\n                                                ]) + \" \" + \"font-semibold text-sm\",\n                                                children: (agent === null || agent === void 0 ? void 0 : agent.name) || \"AI Agent\"\n                                            }, void 0, false, {\n                                                fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                lineNumber: 776,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                                    [\n                                                        \"ce13646027efefd5\",\n                                                        [\n                                                            markdownStyles\n                                                        ]\n                                                    ]\n                                                ]) + \" \" + \"text-xs text-muted-foreground\",\n                                                children: (conversation === null || conversation === void 0 ? void 0 : conversation.title) || \"New conversation\"\n                                            }, void 0, false, {\n                                                fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                lineNumber: 777,\n                                                columnNumber: 15\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                        lineNumber: 775,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                lineNumber: 755,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                    [\n                                        \"ce13646027efefd5\",\n                                        [\n                                            markdownStyles\n                                        ]\n                                    ]\n                                ]) + \" \" + \"text-xs text-muted-foreground\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                        [\n                                            \"ce13646027efefd5\",\n                                            [\n                                                markdownStyles\n                                            ]\n                                        ]\n                                    ]),\n                                    children: [\n                                        \"API: \",\n                                        \"http://localhost:8001/api\" || 0\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                    lineNumber: 785,\n                                    columnNumber: 13\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                lineNumber: 784,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_tooltip__WEBPACK_IMPORTED_MODULE_9__.TooltipProvider, {\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_tooltip__WEBPACK_IMPORTED_MODULE_9__.Tooltip, {\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_tooltip__WEBPACK_IMPORTED_MODULE_9__.TooltipTrigger, {\n                                            asChild: true,\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_5__.Button, {\n                                                variant: \"ghost\",\n                                                size: \"icon\",\n                                                onClick: fetchOrCreateConversation,\n                                                disabled: isLoading,\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowLeftIcon_ImageIcon_Loader2Icon_MicIcon_PaperclipIcon_RefreshCwIcon_SendIcon_lucide_react__WEBPACK_IMPORTED_MODULE_19__[\"default\"], {\n                                                    className: \"h-4 w-4\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                    lineNumber: 797,\n                                                    columnNumber: 19\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                lineNumber: 791,\n                                                columnNumber: 17\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                            lineNumber: 790,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_tooltip__WEBPACK_IMPORTED_MODULE_9__.TooltipContent, {\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                                    [\n                                                        \"ce13646027efefd5\",\n                                                        [\n                                                            markdownStyles\n                                                        ]\n                                                    ]\n                                                ]),\n                                                children: \"Start new conversation\"\n                                            }, void 0, false, {\n                                                fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                lineNumber: 801,\n                                                columnNumber: 17\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                            lineNumber: 800,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                    lineNumber: 789,\n                                    columnNumber: 13\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                lineNumber: 788,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                        lineNumber: 754,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_scroll_area__WEBPACK_IMPORTED_MODULE_10__.ScrollArea, {\n                        className: \"flex-1 p-4\",\n                        children: isLoading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                [\n                                    \"ce13646027efefd5\",\n                                    [\n                                        markdownStyles\n                                    ]\n                                ]\n                            ]) + \" \" + \"flex justify-center items-center h-full\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowLeftIcon_ImageIcon_Loader2Icon_MicIcon_PaperclipIcon_RefreshCwIcon_SendIcon_lucide_react__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n                                className: \"h-8 w-8 animate-spin text-muted-foreground\"\n                            }, void 0, false, {\n                                fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                lineNumber: 811,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                            lineNumber: 810,\n                            columnNumber: 13\n                        }, this) : messages.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                [\n                                    \"ce13646027efefd5\",\n                                    [\n                                        markdownStyles\n                                    ]\n                                ]\n                            ]) + \" \" + \"flex flex-col justify-center items-center h-full text-center\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                        [\n                                            \"ce13646027efefd5\",\n                                            [\n                                                markdownStyles\n                                            ]\n                                        ]\n                                    ]) + \" \" + \"bg-primary/10 p-4 rounded-full mb-4\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_avatar__WEBPACK_IMPORTED_MODULE_7__.Avatar, {\n                                        className: \"h-12 w-12\",\n                                        children: (agent === null || agent === void 0 ? void 0 : agent.avatar) ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_avatar__WEBPACK_IMPORTED_MODULE_7__.AvatarImage, {\n                                            src: agent.avatar.startsWith(\"http\") ? agent.avatar : \"\".concat((_process_env_NEXT_PUBLIC_API_URL1 = \"http://localhost:8001/api\") === null || _process_env_NEXT_PUBLIC_API_URL1 === void 0 ? void 0 : _process_env_NEXT_PUBLIC_API_URL1.replace(\"/api\", \"\"), \"/storage/\").concat(agent.avatar),\n                                            alt: (agent === null || agent === void 0 ? void 0 : agent.name) || \"AI Agent\"\n                                        }, void 0, false, {\n                                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                            lineNumber: 818,\n                                            columnNumber: 21\n                                        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_avatar__WEBPACK_IMPORTED_MODULE_7__.AvatarFallback, {\n                                            children: (agent === null || agent === void 0 ? void 0 : (_agent_name1 = agent.name) === null || _agent_name1 === void 0 ? void 0 : _agent_name1.substring(0, 2).toUpperCase()) || \"AI\"\n                                        }, void 0, false, {\n                                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                            lineNumber: 825,\n                                            columnNumber: 21\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                        lineNumber: 816,\n                                        columnNumber: 17\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                    lineNumber: 815,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                    className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                        [\n                                            \"ce13646027efefd5\",\n                                            [\n                                                markdownStyles\n                                            ]\n                                        ]\n                                    ]) + \" \" + \"text-lg font-medium mb-2\",\n                                    children: [\n                                        \"Start chatting with \",\n                                        agent === null || agent === void 0 ? void 0 : agent.name\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                    lineNumber: 829,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                        [\n                                            \"ce13646027efefd5\",\n                                            [\n                                                markdownStyles\n                                            ]\n                                        ]\n                                    ]) + \" \" + \"text-muted-foreground max-w-md mb-6\",\n                                    children: (agent === null || agent === void 0 ? void 0 : agent.description) || \"Ask any questions or start a conversation.\"\n                                }, void 0, false, {\n                                    fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                    lineNumber: 830,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                            lineNumber: 814,\n                            columnNumber: 13\n                        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                [\n                                    \"ce13646027efefd5\",\n                                    [\n                                        markdownStyles\n                                    ]\n                                ]\n                            ]) + \" \" + \"space-y-4 pb-4\",\n                            children: [\n                                messages.filter((m)=>m.role !== \"system\").map((message)=>{\n                                    var _process_env_NEXT_PUBLIC_API_URL, _agent_name;\n                                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                            [\n                                                \"ce13646027efefd5\",\n                                                [\n                                                    markdownStyles\n                                                ]\n                                            ]\n                                        ]) + \" \" + \"flex \".concat(message.role === \"user\" ? \"justify-end\" : \"justify-start\"),\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                                [\n                                                    \"ce13646027efefd5\",\n                                                    [\n                                                        markdownStyles\n                                                    ]\n                                                ]\n                                            ]) + \" \" + \"flex gap-3 max-w-[80%] \".concat(message.role === \"user\" ? \"flex-row-reverse\" : \"\"),\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_avatar__WEBPACK_IMPORTED_MODULE_7__.Avatar, {\n                                                    className: \"h-8 w-8 flex-shrink-0 mt-1\",\n                                                    children: message.role === \"user\" ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_avatar__WEBPACK_IMPORTED_MODULE_7__.AvatarFallback, {\n                                                        children: \"Me\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                        lineNumber: 844,\n                                                        columnNumber: 25\n                                                    }, this) : (agent === null || agent === void 0 ? void 0 : agent.avatar) ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_avatar__WEBPACK_IMPORTED_MODULE_7__.AvatarImage, {\n                                                        src: agent.avatar.startsWith(\"http\") ? agent.avatar : \"\".concat((_process_env_NEXT_PUBLIC_API_URL = \"http://localhost:8001/api\") === null || _process_env_NEXT_PUBLIC_API_URL === void 0 ? void 0 : _process_env_NEXT_PUBLIC_API_URL.replace(\"/api\", \"\"), \"/storage/\").concat(agent.avatar),\n                                                        alt: (agent === null || agent === void 0 ? void 0 : agent.name) || \"AI\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                        lineNumber: 846,\n                                                        columnNumber: 25\n                                                    }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_avatar__WEBPACK_IMPORTED_MODULE_7__.AvatarFallback, {\n                                                        children: (agent === null || agent === void 0 ? void 0 : (_agent_name = agent.name) === null || _agent_name === void 0 ? void 0 : _agent_name.substring(0, 2).toUpperCase()) || \"AI\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                        lineNumber: 853,\n                                                        columnNumber: 25\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                    lineNumber: 842,\n                                                    columnNumber: 21\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                                        [\n                                                            \"ce13646027efefd5\",\n                                                            [\n                                                                markdownStyles\n                                                            ]\n                                                        ]\n                                                    ]),\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_card__WEBPACK_IMPORTED_MODULE_8__.Card, {\n                                                            className: \"\".concat(message.role === \"user\" ? \"bg-primary text-primary-foreground\" : \"bg-muted\"),\n                                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_card__WEBPACK_IMPORTED_MODULE_8__.CardContent, {\n                                                                className: \"p-3\",\n                                                                children: [\n                                                                    message.loading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                        className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                                                            [\n                                                                                \"ce13646027efefd5\",\n                                                                                [\n                                                                                    markdownStyles\n                                                                                ]\n                                                                            ]\n                                                                        ]),\n                                                                        children: [\n                                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(MarkdownContent, {\n                                                                                content: message.content\n                                                                            }, void 0, false, {\n                                                                                fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                                                lineNumber: 862,\n                                                                                columnNumber: 31\n                                                                            }, this),\n                                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                                className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                                                                    [\n                                                                                        \"ce13646027efefd5\",\n                                                                                        [\n                                                                                            markdownStyles\n                                                                                        ]\n                                                                                    ]\n                                                                                ]) + \" \" + \"mt-1 flex\",\n                                                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                                    className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                                                                        [\n                                                                                            \"ce13646027efefd5\",\n                                                                                            [\n                                                                                                markdownStyles\n                                                                                            ]\n                                                                                        ]\n                                                                                    ]) + \" \" + \"typing-indicator\",\n                                                                                    children: [\n                                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                                            className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                                                                                [\n                                                                                                    \"ce13646027efefd5\",\n                                                                                                    [\n                                                                                                        markdownStyles\n                                                                                                    ]\n                                                                                                ]\n                                                                                            ])\n                                                                                        }, void 0, false, {\n                                                                                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                                                            lineNumber: 865,\n                                                                                            columnNumber: 35\n                                                                                        }, this),\n                                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                                            className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                                                                                [\n                                                                                                    \"ce13646027efefd5\",\n                                                                                                    [\n                                                                                                        markdownStyles\n                                                                                                    ]\n                                                                                                ]\n                                                                                            ])\n                                                                                        }, void 0, false, {\n                                                                                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                                                            lineNumber: 866,\n                                                                                            columnNumber: 35\n                                                                                        }, this),\n                                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                                            className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                                                                                [\n                                                                                                    \"ce13646027efefd5\",\n                                                                                                    [\n                                                                                                        markdownStyles\n                                                                                                    ]\n                                                                                                ]\n                                                                                            ])\n                                                                                        }, void 0, false, {\n                                                                                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                                                            lineNumber: 867,\n                                                                                            columnNumber: 35\n                                                                                        }, this)\n                                                                                    ]\n                                                                                }, void 0, true, {\n                                                                                    fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                                                    lineNumber: 864,\n                                                                                    columnNumber: 33\n                                                                                }, this)\n                                                                            }, void 0, false, {\n                                                                                fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                                                lineNumber: 863,\n                                                                                columnNumber: 31\n                                                                            }, this)\n                                                                        ]\n                                                                    }, void 0, true, {\n                                                                        fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                                        lineNumber: 861,\n                                                                        columnNumber: 29\n                                                                    }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(MarkdownContent, {\n                                                                        content: message.content\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                                        lineNumber: 872,\n                                                                        columnNumber: 29\n                                                                    }, this),\n                                                                    message.files && message.files.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                        className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                                                            [\n                                                                                \"ce13646027efefd5\",\n                                                                                [\n                                                                                    markdownStyles\n                                                                                ]\n                                                                            ]\n                                                                        ]) + \" \" + \"mt-2 grid gap-2\",\n                                                                        children: message.files.map((file, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                                                                href: file,\n                                                                                target: \"_blank\",\n                                                                                rel: \"noopener noreferrer\",\n                                                                                className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                                                                    [\n                                                                                        \"ce13646027efefd5\",\n                                                                                        [\n                                                                                            markdownStyles\n                                                                                        ]\n                                                                                    ]\n                                                                                ]) + \" \" + \"flex items-center gap-2 p-2 rounded bg-background/50 hover:bg-background\",\n                                                                                children: [\n                                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowLeftIcon_ImageIcon_Loader2Icon_MicIcon_PaperclipIcon_RefreshCwIcon_SendIcon_lucide_react__WEBPACK_IMPORTED_MODULE_21__[\"default\"], {\n                                                                                        className: \"h-4 w-4\"\n                                                                                    }, void 0, false, {\n                                                                                        fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                                                        lineNumber: 886,\n                                                                                        columnNumber: 35\n                                                                                    }, this),\n                                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                                        className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                                                                            [\n                                                                                                \"ce13646027efefd5\",\n                                                                                                [\n                                                                                                    markdownStyles\n                                                                                                ]\n                                                                                            ]\n                                                                                        ]) + \" \" + \"text-xs truncate\",\n                                                                                        children: file.split(\"/\").pop() || \"File\"\n                                                                                    }, void 0, false, {\n                                                                                        fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                                                        lineNumber: 887,\n                                                                                        columnNumber: 35\n                                                                                    }, this)\n                                                                                ]\n                                                                            }, index, true, {\n                                                                                fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                                                lineNumber: 879,\n                                                                                columnNumber: 33\n                                                                            }, this))\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                                        lineNumber: 877,\n                                                                        columnNumber: 29\n                                                                    }, this)\n                                                                ]\n                                                            }, void 0, true, {\n                                                                fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                                lineNumber: 859,\n                                                                columnNumber: 25\n                                                            }, this)\n                                                        }, void 0, false, {\n                                                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                            lineNumber: 858,\n                                                            columnNumber: 23\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                                                [\n                                                                    \"ce13646027efefd5\",\n                                                                    [\n                                                                        markdownStyles\n                                                                    ]\n                                                                ]\n                                                            ]) + \" \" + \"text-xs text-muted-foreground mt-1 \".concat(message.role === \"user\" ? \"text-right\" : \"\"),\n                                                            children: formatTime(message.created_at)\n                                                        }, void 0, false, {\n                                                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                            lineNumber: 896,\n                                                            columnNumber: 23\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                    lineNumber: 857,\n                                                    columnNumber: 21\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                            lineNumber: 841,\n                                            columnNumber: 19\n                                        }, this)\n                                    }, message.id, false, {\n                                        fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                        lineNumber: 837,\n                                        columnNumber: 17\n                                    }, this);\n                                }),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    ref: messagesEndRef,\n                                    className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                        [\n                                            \"ce13646027efefd5\",\n                                            [\n                                                markdownStyles\n                                            ]\n                                        ]\n                                    ])\n                                }, void 0, false, {\n                                    fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                    lineNumber: 903,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                            lineNumber: 835,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                        lineNumber: 808,\n                        columnNumber: 9\n                    }, this),\n                    files.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                            [\n                                \"ce13646027efefd5\",\n                                [\n                                    markdownStyles\n                                ]\n                            ]\n                        ]) + \" \" + \"px-4 pt-2\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                [\n                                    \"ce13646027efefd5\",\n                                    [\n                                        markdownStyles\n                                    ]\n                                ]\n                            ]) + \" \" + \"flex flex-wrap gap-2\",\n                            children: files.map((file, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                        [\n                                            \"ce13646027efefd5\",\n                                            [\n                                                markdownStyles\n                                            ]\n                                        ]\n                                    ]) + \" \" + \"flex items-center gap-1 bg-muted p-1 rounded text-xs\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                                [\n                                                    \"ce13646027efefd5\",\n                                                    [\n                                                        markdownStyles\n                                                    ]\n                                                ]\n                                            ]) + \" \" + \"truncate max-w-[100px]\",\n                                            children: file.name\n                                        }, void 0, false, {\n                                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                            lineNumber: 914,\n                                            columnNumber: 19\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_5__.Button, {\n                                            variant: \"ghost\",\n                                            size: \"icon\",\n                                            className: \"h-4 w-4 rounded-full\",\n                                            onClick: ()=>removeFile(index),\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                                    [\n                                                        \"ce13646027efefd5\",\n                                                        [\n                                                            markdownStyles\n                                                        ]\n                                                    ]\n                                                ]),\n                                                children: \"\\xd7\"\n                                            }, void 0, false, {\n                                                fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                lineNumber: 921,\n                                                columnNumber: 21\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                            lineNumber: 915,\n                                            columnNumber: 19\n                                        }, this)\n                                    ]\n                                }, index, true, {\n                                    fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                    lineNumber: 913,\n                                    columnNumber: 17\n                                }, this))\n                        }, void 0, false, {\n                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                            lineNumber: 911,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                        lineNumber: 910,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                            [\n                                \"ce13646027efefd5\",\n                                [\n                                    markdownStyles\n                                ]\n                            ]\n                        ]) + \" \" + \"border-t p-4\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                [\n                                    \"ce13646027efefd5\",\n                                    [\n                                        markdownStyles\n                                    ]\n                                ]\n                            ]) + \" \" + \"relative flex\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    type: \"file\",\n                                    ref: fileInputRef,\n                                    onChange: handleFileChange,\n                                    multiple: true,\n                                    className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                        [\n                                            \"ce13646027efefd5\",\n                                            [\n                                                markdownStyles\n                                            ]\n                                        ]\n                                    ]) + \" \" + \"hidden\"\n                                }, void 0, false, {\n                                    fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                    lineNumber: 932,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_input__WEBPACK_IMPORTED_MODULE_6__.Input, {\n                                    placeholder: \"Type a message...\",\n                                    value: inputMessage,\n                                    onChange: (e)=>setInputMessage(e.target.value),\n                                    onKeyDown: handleKeyDown,\n                                    disabled: isSending || isLoading,\n                                    className: \"pr-24\"\n                                }, void 0, false, {\n                                    fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                    lineNumber: 940,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                        [\n                                            \"ce13646027efefd5\",\n                                            [\n                                                markdownStyles\n                                            ]\n                                        ]\n                                    ]) + \" \" + \"absolute right-1 top-1 flex items-center gap-1\",\n                                    children: [\n                                        (agent === null || agent === void 0 ? void 0 : (_agent_capabilities = agent.capabilities) === null || _agent_capabilities === void 0 ? void 0 : _agent_capabilities.includes(\"image_upload\")) && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_tooltip__WEBPACK_IMPORTED_MODULE_9__.TooltipProvider, {\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_tooltip__WEBPACK_IMPORTED_MODULE_9__.Tooltip, {\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_tooltip__WEBPACK_IMPORTED_MODULE_9__.TooltipTrigger, {\n                                                        asChild: true,\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_5__.Button, {\n                                                            type: \"button\",\n                                                            size: \"icon\",\n                                                            variant: \"ghost\",\n                                                            className: \"h-8 w-8\",\n                                                            onClick: handleFileClick,\n                                                            disabled: isSending,\n                                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowLeftIcon_ImageIcon_Loader2Icon_MicIcon_PaperclipIcon_RefreshCwIcon_SendIcon_lucide_react__WEBPACK_IMPORTED_MODULE_22__[\"default\"], {\n                                                                className: \"h-4 w-4\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                                lineNumber: 962,\n                                                                columnNumber: 25\n                                                            }, this)\n                                                        }, void 0, false, {\n                                                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                            lineNumber: 954,\n                                                            columnNumber: 23\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                        lineNumber: 953,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_tooltip__WEBPACK_IMPORTED_MODULE_9__.TooltipContent, {\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                            className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                                                [\n                                                                    \"ce13646027efefd5\",\n                                                                    [\n                                                                        markdownStyles\n                                                                    ]\n                                                                ]\n                                                            ]),\n                                                            children: \"Upload images\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                            lineNumber: 966,\n                                                            columnNumber: 23\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                        lineNumber: 965,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                lineNumber: 952,\n                                                columnNumber: 19\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                            lineNumber: 951,\n                                            columnNumber: 17\n                                        }, this),\n                                        (agent === null || agent === void 0 ? void 0 : (_agent_capabilities1 = agent.capabilities) === null || _agent_capabilities1 === void 0 ? void 0 : _agent_capabilities1.includes(\"voice\")) && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_tooltip__WEBPACK_IMPORTED_MODULE_9__.TooltipProvider, {\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_tooltip__WEBPACK_IMPORTED_MODULE_9__.Tooltip, {\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_tooltip__WEBPACK_IMPORTED_MODULE_9__.TooltipTrigger, {\n                                                        asChild: true,\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_5__.Button, {\n                                                            type: \"button\",\n                                                            size: \"icon\",\n                                                            variant: \"ghost\",\n                                                            className: \"h-8 w-8\",\n                                                            disabled: true,\n                                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowLeftIcon_ImageIcon_Loader2Icon_MicIcon_PaperclipIcon_RefreshCwIcon_SendIcon_lucide_react__WEBPACK_IMPORTED_MODULE_23__[\"default\"], {\n                                                                className: \"h-4 w-4\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                                lineNumber: 983,\n                                                                columnNumber: 25\n                                                            }, this)\n                                                        }, void 0, false, {\n                                                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                            lineNumber: 976,\n                                                            columnNumber: 23\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                        lineNumber: 975,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_tooltip__WEBPACK_IMPORTED_MODULE_9__.TooltipContent, {\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                            className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                                                [\n                                                                    \"ce13646027efefd5\",\n                                                                    [\n                                                                        markdownStyles\n                                                                    ]\n                                                                ]\n                                                            ]),\n                                                            children: \"Voice message (coming soon)\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                            lineNumber: 987,\n                                                            columnNumber: 23\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                        lineNumber: 986,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                lineNumber: 974,\n                                                columnNumber: 19\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                            lineNumber: 973,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_5__.Button, {\n                                            type: \"button\",\n                                            size: \"icon\",\n                                            className: \"h-8 w-8\",\n                                            onClick: ()=>{\n                                                console.log(\"Send button clicked\");\n                                                sendMessage();\n                                            },\n                                            disabled: isSending || inputMessage.trim() === \"\" && files.length === 0,\n                                            children: isSending ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowLeftIcon_ImageIcon_Loader2Icon_MicIcon_PaperclipIcon_RefreshCwIcon_SendIcon_lucide_react__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n                                                className: \"h-4 w-4 animate-spin\"\n                                            }, void 0, false, {\n                                                fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                lineNumber: 1004,\n                                                columnNumber: 19\n                                            }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowLeftIcon_ImageIcon_Loader2Icon_MicIcon_PaperclipIcon_RefreshCwIcon_SendIcon_lucide_react__WEBPACK_IMPORTED_MODULE_24__[\"default\"], {\n                                                className: \"h-4 w-4\"\n                                            }, void 0, false, {\n                                                fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                                lineNumber: 1006,\n                                                columnNumber: 19\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                            lineNumber: 993,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                                    lineNumber: 949,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                            lineNumber: 931,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                        lineNumber: 930,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n                lineNumber: 752,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Volumes/Data/banhang/frontend/app/ai/[agentId]/chat/page.tsx\",\n        lineNumber: 712,\n        columnNumber: 5\n    }, this);\n}\n_s(ChatPage, \"1EIH1NhiVFzCD9H1DrLmKXuSM3o=\", false, function() {\n    return [\n        next_navigation__WEBPACK_IMPORTED_MODULE_3__.useParams,\n        next_navigation__WEBPACK_IMPORTED_MODULE_3__.useRouter,\n        next_navigation__WEBPACK_IMPORTED_MODULE_3__.useSearchParams,\n        _components_ui_use_toast__WEBPACK_IMPORTED_MODULE_11__.useToast\n    ];\n});\n_c1 = ChatPage;\nvar _c, _c1;\n$RefreshReg$(_c, \"MarkdownContent\");\n$RefreshReg$(_c1, \"ChatPage\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FwcC9haS9bYWdlbnRJZF0vY2hhdC9wYWdlLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRW1EO0FBQ29CO0FBQ2Y7QUFDVDtBQUNGO0FBQytCO0FBQ3BCO0FBQzBDO0FBQzFDO0FBQzZEO0FBQ2pFO0FBQ3hCO0FBRW9CO0FBQ047QUFDUjtBQUNtQztBQUNJO0FBdUN6RSxNQUFNa0MsaUJBQWlCO0lBQ3JCQyxHQUFHO0lBQ0hDLElBQUk7SUFDSkMsSUFBSTtJQUNKQyxJQUFJO0lBQ0pDLElBQUk7SUFDSkMsSUFBSTtJQUNKQyxJQUFJO0lBQ0pDLElBQUk7SUFDSkMsSUFBSTtJQUNKQyxJQUFJO0lBQ0pDLE1BQU07SUFDTkMsS0FBSztJQUNMQyxZQUFZO0lBQ1pDLEdBQUc7SUFDSEMsT0FBTztJQUNQQyxPQUFPO0lBQ1BDLElBQUk7SUFDSkMsSUFBSTtBQUNOO0FBRUEsTUFBTUMscUJBQWlDO0lBQ3JDbEIsR0FBRztZQUFDLEVBQUVtQixRQUFRLEVBQUU7NkJBQUssOERBQUNuQjtZQUFFb0IsV0FBV3JCLGVBQWVDLENBQUM7c0JBQUdtQjs7Ozs7OztJQUN0RGxCLElBQUk7WUFBQyxFQUFFa0IsUUFBUSxFQUFFOzZCQUFLLDhEQUFDbEI7WUFBR21CLFdBQVdyQixlQUFlRSxFQUFFO3NCQUFHa0I7Ozs7Ozs7SUFDekRqQixJQUFJO1lBQUMsRUFBRWlCLFFBQVEsRUFBRTs2QkFBSyw4REFBQ2pCO1lBQUdrQixXQUFXckIsZUFBZUcsRUFBRTtzQkFBR2lCOzs7Ozs7O0lBQ3pEaEIsSUFBSTtZQUFDLEVBQUVnQixRQUFRLEVBQUU7NkJBQUssOERBQUNoQjtZQUFHaUIsV0FBV3JCLGVBQWVJLEVBQUU7c0JBQUdnQjs7Ozs7OztJQUN6RGYsSUFBSTtZQUFDLEVBQUVlLFFBQVEsRUFBRTs2QkFBSyw4REFBQ2Y7WUFBR2dCLFdBQVdyQixlQUFlSyxFQUFFO3NCQUFHZTs7Ozs7OztJQUN6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c0VBRVYsNEVBQUNuTiw2SkFBT0E7Z0VBQUNrQyxXQUFVOzs7Ozs7Ozs7Ozs7Ozs7O2tFQUd2Qiw4REFBQ3hDLGtFQUFjQTtrRUFDYiw0RUFBQ29COzs7Ozt3RUE5T2JEOzs7O3NFQThPZTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztzREFNWCw4REFBQzNCLHlEQUFNQTs0Q0FDTHlMLE1BQUs7NENBQ0xzQyxNQUFLOzRDQUNML0ssV0FBVTs0Q0FDVmdMLFNBQVM7Z0RBQ1AxSCxRQUFRQyxHQUFHLENBQUM7Z0RBQ1orQzs0Q0FDRjs0Q0FDQTJFLFVBQVU5SSxhQUFjSixhQUFhd0UsSUFBSSxPQUFPLE1BQU01RCxNQUFNd0MsTUFBTSxLQUFLO3NEQUV0RWhELDBCQUNDLDhEQUFDakUsNkpBQVdBO2dEQUFDOEIsV0FBVTs7Ozs7cUVBRXZCLDhEQUFDbkMsNkpBQVFBO2dEQUFDbUMsV0FBVTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVN0QztHQWgzQndCbUI7O1FBQ1B2RSxzREFBU0E7UUFDVEMsc0RBQVNBO1FBQ0hDLDREQUFlQTtRQUNsQnFCLCtEQUFRQTs7O01BSkpnRCIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9hcHAvYWkvW2FnZW50SWRdL2NoYXQvcGFnZS50c3g/MDBlNyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIlxuXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tIFwicmVhY3RcIlxuaW1wb3J0IHsgdXNlUGFyYW1zLCB1c2VSb3V0ZXIsIHVzZVNlYXJjaFBhcmFtcyB9IGZyb20gXCJuZXh0L25hdmlnYXRpb25cIlxuaW1wb3J0IHsgQXBwU2hlbGwgfSBmcm9tIFwiQC9jb21wb25lbnRzL2xheW91dC9hcHAtc2hlbGxcIlxuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9idXR0b25cIlxuaW1wb3J0IHsgSW5wdXQgfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2lucHV0XCJcbmltcG9ydCB7IEF2YXRhciwgQXZhdGFyRmFsbGJhY2ssIEF2YXRhckltYWdlIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9hdmF0YXJcIlxuaW1wb3J0IHsgQ2FyZCwgQ2FyZENvbnRlbnQgfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2NhcmRcIlxuaW1wb3J0IHsgVG9vbHRpcCwgVG9vbHRpcENvbnRlbnQsIFRvb2x0aXBQcm92aWRlciwgVG9vbHRpcFRyaWdnZXIgfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL3Rvb2x0aXBcIlxuaW1wb3J0IHsgU2Nyb2xsQXJlYSB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvc2Nyb2xsLWFyZWFcIlxuaW1wb3J0IHsgQXJyb3dMZWZ0SWNvbiwgU2VuZEljb24sIE1pY0ljb24sIEltYWdlSWNvbiwgUGFwZXJjbGlwSWNvbiwgUmVmcmVzaEN3SWNvbiwgTG9hZGVyMkljb24gfSBmcm9tIFwibHVjaWRlLXJlYWN0XCJcbmltcG9ydCB7IHVzZVRvYXN0IH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS91c2UtdG9hc3RcIlxuaW1wb3J0IExpbmsgZnJvbSBcIm5leHQvbGlua1wiXG5pbXBvcnQgSW1hZ2UgZnJvbSBcIm5leHQvaW1hZ2VcIlxuaW1wb3J0IHsgZ2V0QnVzaW5lc3NJZCB9IGZyb20gXCJAL2xpYi9hcGktY2xpZW50XCJcbmltcG9ydCBSZWFjdE1hcmtkb3duIGZyb20gJ3JlYWN0LW1hcmtkb3duJ1xuaW1wb3J0IHJlbWFya0dmbSBmcm9tICdyZW1hcmstZ2ZtJ1xuaW1wb3J0IHsgUHJpc20gYXMgU3ludGF4SGlnaGxpZ2h0ZXIgfSBmcm9tICdyZWFjdC1zeW50YXgtaGlnaGxpZ2h0ZXInXG5pbXBvcnQgeyB0b21vcnJvdyB9IGZyb20gJ3JlYWN0LXN5bnRheC1oaWdobGlnaHRlci9kaXN0L2VzbS9zdHlsZXMvcHJpc20nXG5pbXBvcnQgdHlwZSB7IENvbXBvbmVudHMgfSBmcm9tICdyZWFjdC1tYXJrZG93bidcbmltcG9ydCB0eXBlIHsgUHJpc21Bc3luY0xpZ2h0IGFzIFN5bnRheEhpZ2hsaWdodGVyVHlwZSB9IGZyb20gJ3JlYWN0LXN5bnRheC1oaWdobGlnaHRlcidcblxuaW50ZXJmYWNlIENvZGVQcm9wcyB7XG4gIGlubGluZT86IGJvb2xlYW5cbiAgY2xhc3NOYW1lPzogc3RyaW5nXG4gIGNoaWxkcmVuPzogUmVhY3QuUmVhY3ROb2RlXG59XG5cbmludGVyZmFjZSBBZ2VudCB7XG4gIGlkOiBzdHJpbmdcbiAgbmFtZTogc3RyaW5nXG4gIGF2YXRhcjogc3RyaW5nIHwgbnVsbFxuICBkZXNjcmlwdGlvbjogc3RyaW5nIHwgbnVsbFxuICBjYXBhYmlsaXRpZXM6IHN0cmluZ1tdXG59XG5cbmludGVyZmFjZSBNZXNzYWdlIHtcbiAgaWQ6IHN0cmluZ1xuICBhaV9jb252ZXJzYXRpb25faWQ6IHN0cmluZ1xuICByb2xlOiAndXNlcicgfCAnYXNzaXN0YW50JyB8ICdzeXN0ZW0nXG4gIGNvbnRlbnQ6IHN0cmluZ1xuICBmaWxlcz86IHN0cmluZ1tdXG4gIGlzX3JlYWQ6IGJvb2xlYW5cbiAgY3JlYXRlZF9hdDogc3RyaW5nXG4gIGxvYWRpbmc/OiBib29sZWFuXG59XG5cbmludGVyZmFjZSBDb252ZXJzYXRpb24ge1xuICBpZDogc3RyaW5nXG4gIHRpdGxlOiBzdHJpbmdcbiAgYWlfYWdlbnRfaWQ6IHN0cmluZ1xuICB1c2VyX2lkOiBzdHJpbmdcbiAgYnVzaW5lc3NfaWQ6IHN0cmluZ1xuICBsYXN0X21lc3NhZ2VfYXQ6IHN0cmluZ1xuICBhaUFnZW50OiBBZ2VudFxufVxuXG5jb25zdCBtYXJrZG93blN0eWxlcyA9IHtcbiAgcDogJ21iLTQgbGVhZGluZy1yZWxheGVkJyxcbiAgaDE6ICd0ZXh0LTN4bCBmb250LWJvbGQgbWItNCcsXG4gIGgyOiAndGV4dC0yeGwgZm9udC1ib2xkIG1iLTMnLFxuICBoMzogJ3RleHQteGwgZm9udC1ib2xkIG1iLTInLFxuICBoNDogJ3RleHQtbGcgZm9udC1ib2xkIG1iLTInLFxuICBoNTogJ3RleHQtYmFzZSBmb250LWJvbGQgbWItMicsXG4gIGg2OiAndGV4dC1zbSBmb250LWJvbGQgbWItMicsXG4gIHVsOiAnbGlzdC1kaXNjIHBsLTYgbWItNCcsXG4gIG9sOiAnbGlzdC1kZWNpbWFsIHBsLTYgbWItNCcsXG4gIGxpOiAnbWItMScsXG4gIGNvZGU6ICdiZy1ncmF5LTEwMCByb3VuZGVkIHB4LTEgcHktMC41IGZvbnQtbW9ubyB0ZXh0LXNtJyxcbiAgcHJlOiAnYmctZ3JheS0xMDAgcm91bmRlZC1sZyBwLTQgbWItNCBvdmVyZmxvdy14LWF1dG8nLFxuICBibG9ja3F1b3RlOiAnYm9yZGVyLWwtNCBib3JkZXItZ3JheS0zMDAgcGwtNCBpdGFsaWMgbXktNCcsXG4gIGE6ICd0ZXh0LWJsdWUtNjAwIGhvdmVyOnVuZGVybGluZScsXG4gIHRhYmxlOiAnbWluLXctZnVsbCBib3JkZXItY29sbGFwc2UgbWItNCcsXG4gIHRoZWFkOiAnYmctZ3JheS0xMDAnLFxuICB0aDogJ2JvcmRlciBib3JkZXItZ3JheS0zMDAgcHgtNCBweS0yIHRleHQtbGVmdCcsXG4gIHRkOiAnYm9yZGVyIGJvcmRlci1ncmF5LTMwMCBweC00IHB5LTInLFxufTtcblxuY29uc3QgbWFya2Rvd25Db21wb25lbnRzOiBDb21wb25lbnRzID0ge1xuICBwOiAoeyBjaGlsZHJlbiB9KSA9PiA8cCBjbGFzc05hbWU9e21hcmtkb3duU3R5bGVzLnB9PntjaGlsZHJlbn08L3A+LFxuICBoMTogKHsgY2hpbGRyZW4gfSkgPT4gPGgxIGNsYXNzTmFtZT17bWFya2Rvd25TdHlsZXMuaDF9PntjaGlsZHJlbn08L2gxPixcbiAgaDI6ICh7IGNoaWxkcmVuIH0pID0+IDxoMiBjbGFzc05hbWU9e21hcmtkb3duU3R5bGVzLmgyfT57Y2hpbGRyZW59PC9oMj4sXG4gIGgzOiAoeyBjaGlsZHJlbiB9KSA9PiA8aDMgY2xhc3NOYW1lPXttYXJrZG93blN0eWxlcy5oM30+e2NoaWxkcmVufTwvaDM+LFxuICBoNDogKHsgY2hpbGRyZW4gfSkgPT4gPGg0IGNsYXNzTmFtZT17bWFya2Rvd25TdHlsZXMuaDR9PntjaGlsZHJlbn08L2g0PixcbiAgaDU6ICh7IGNoaWxkcmVuIH0pID0+IDxoNSBjbGFzc05hbWU9e21hcmtkb3duU3R5bGVzLmg1fT57Y2hpbGRyZW59PC9oNT4sXG4gIGg2OiAoeyBjaGlsZHJlbiB9KSA9PiA8aDYgY2xhc3NOYW1lPXttYXJrZG93blN0eWxlcy5oNn0+e2NoaWxkcmVufTwvaDY+LFxuICB1bDogKHsgY2hpbGRyZW4gfSkgPT4gPHVsIGNsYXNzTmFtZT17bWFya2Rvd25TdHlsZXMudWx9PntjaGlsZHJlbn08L3VsPixcbiAgb2w6ICh7IGNoaWxkcmVuIH0pID0+IDxvbCBjbGFzc05hbWU9e21hcmtkb3duU3R5bGVzLm9sfT57Y2hpbGRyZW59PC9vbD4sXG4gIGxpOiAoeyBjaGlsZHJlbiB9KSA9PiA8bGkgY2xhc3NOYW1lPXttYXJrZG93blN0eWxlcy5saX0+e2NoaWxkcmVufTwvbGk+LFxuICBjb2RlOiAoeyBub2RlLCBpbmxpbmUsIGNsYXNzTmFtZSwgY2hpbGRyZW4sIC4uLnByb3BzIH06IENvZGVQcm9wcykgPT4ge1xuICAgIGNvbnN0IG1hdGNoID0gL2xhbmd1YWdlLShcXHcrKS8uZXhlYyhjbGFzc05hbWUgfHwgJycpO1xuICAgIHJldHVybiAhaW5saW5lICYmIG1hdGNoID8gKFxuICAgICAgPFN5bnRheEhpZ2hsaWdodGVyXG4gICAgICAgIHN0eWxlPXt0b21vcnJvdyBhcyBhbnl9XG4gICAgICAgIGxhbmd1YWdlPXttYXRjaFsxXX1cbiAgICAgICAgUHJlVGFnPVwiZGl2XCJcbiAgICAgICAgey4uLnByb3BzIGFzIGFueX1cbiAgICAgID5cbiAgICAgICAge1N0cmluZyhjaGlsZHJlbikucmVwbGFjZSgvXFxuJC8sICcnKX1cbiAgICAgIDwvU3ludGF4SGlnaGxpZ2h0ZXI+XG4gICAgKSA6IChcbiAgICAgIDxjb2RlIGNsYXNzTmFtZT17bWFya2Rvd25TdHlsZXMuY29kZX0gey4uLnByb3BzfT5cbiAgICAgICAge2NoaWxkcmVufVxuICAgICAgPC9jb2RlPlxuICAgICk7XG4gIH0sXG4gIHByZTogKHsgY2hpbGRyZW4gfSkgPT4gPHByZSBjbGFzc05hbWU9e21hcmtkb3duU3R5bGVzLnByZX0+e2NoaWxkcmVufTwvcHJlPixcbiAgYmxvY2txdW90ZTogKHsgY2hpbGRyZW4gfSkgPT4gKFxuICAgIDxibG9ja3F1b3RlIGNsYXNzTmFtZT17bWFya2Rvd25TdHlsZXMuYmxvY2txdW90ZX0+e2NoaWxkcmVufTwvYmxvY2txdW90ZT5cbiAgKSxcbiAgYTogKHsgaHJlZiwgY2hpbGRyZW4gfSkgPT4gKFxuICAgIDxhIGhyZWY9e2hyZWZ9IGNsYXNzTmFtZT17bWFya2Rvd25TdHlsZXMuYX0gdGFyZ2V0PVwiX2JsYW5rXCIgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiPlxuICAgICAge2NoaWxkcmVufVxuICAgIDwvYT5cbiAgKSxcbiAgdGFibGU6ICh7IGNoaWxkcmVuIH0pID0+IDx0YWJsZSBjbGFzc05hbWU9e21hcmtkb3duU3R5bGVzLnRhYmxlfT57Y2hpbGRyZW59PC90YWJsZT4sXG4gIHRoZWFkOiAoeyBjaGlsZHJlbiB9KSA9PiA8dGhlYWQgY2xhc3NOYW1lPXttYXJrZG93blN0eWxlcy50aGVhZH0+e2NoaWxkcmVufTwvdGhlYWQ+LFxuICB0aDogKHsgY2hpbGRyZW4gfSkgPT4gPHRoIGNsYXNzTmFtZT17bWFya2Rvd25TdHlsZXMudGh9PntjaGlsZHJlbn08L3RoPixcbiAgdGQ6ICh7IGNoaWxkcmVuIH0pID0+IDx0ZCBjbGFzc05hbWU9e21hcmtkb3duU3R5bGVzLnRkfT57Y2hpbGRyZW59PC90ZD4sXG59O1xuXG4vLyBDb21wb25lbnQgd3JhcHBlciBjaG8gUmVhY3RNYXJrZG93blxuY29uc3QgTWFya2Rvd25Db250ZW50ID0gKHsgY29udGVudCB9OiB7IGNvbnRlbnQ6IHN0cmluZyB9KSA9PiAoXG4gIDxkaXYgY2xhc3NOYW1lPVwibWFya2Rvd24tY29udGVudFwiPlxuICAgIDxSZWFjdE1hcmtkb3duIFxuICAgICAgcmVtYXJrUGx1Z2lucz17W3JlbWFya0dmbV19XG4gICAgICBjb21wb25lbnRzPXttYXJrZG93bkNvbXBvbmVudHN9XG4gICAgPlxuICAgICAge2NvbnRlbnR9XG4gICAgPC9SZWFjdE1hcmtkb3duPlxuICA8L2Rpdj5cbik7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENoYXRQYWdlKCkge1xuICBjb25zdCBwYXJhbXMgPSB1c2VQYXJhbXMoKVxuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKVxuICBjb25zdCBzZWFyY2hQYXJhbXMgPSB1c2VTZWFyY2hQYXJhbXMoKVxuICBjb25zdCB7IHRvYXN0IH0gPSB1c2VUb2FzdCgpXG4gIFxuICBjb25zdCBbYWdlbnQsIHNldEFnZW50XSA9IHVzZVN0YXRlPEFnZW50IHwgbnVsbD4obnVsbClcbiAgY29uc3QgW2NvbnZlcnNhdGlvbiwgc2V0Q29udmVyc2F0aW9uXSA9IHVzZVN0YXRlPENvbnZlcnNhdGlvbiB8IG51bGw+KG51bGwpXG4gIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGU8TWVzc2FnZVtdPihbXSlcbiAgY29uc3QgW2lucHV0TWVzc2FnZSwgc2V0SW5wdXRNZXNzYWdlXSA9IHVzZVN0YXRlKFwiXCIpXG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKVxuICBjb25zdCBbaXNTZW5kaW5nLCBzZXRJc1NlbmRpbmddID0gdXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IFtpc05ld0NvbnZlcnNhdGlvbiwgc2V0SXNOZXdDb252ZXJzYXRpb25dID0gdXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IFtpc0xvZ2dlZEluLCBzZXRJc0xvZ2dlZEluXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBbYnVzaW5lc3NJZCwgc2V0QnVzaW5lc3NJZF0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKVxuICBjb25zdCBbZmlsZXMsIHNldEZpbGVzXSA9IHVzZVN0YXRlPEZpbGVbXT4oW10pXG4gIFxuICBjb25zdCBtZXNzYWdlc0VuZFJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbClcbiAgY29uc3QgZmlsZUlucHV0UmVmID0gdXNlUmVmPEhUTUxJbnB1dEVsZW1lbnQ+KG51bGwpXG4gIFxuICBjb25zdCBhZ2VudElkID0gcGFyYW1zPy5hZ2VudElkIGFzIHN0cmluZ1xuICBjb25zdCBjb252ZXJzYXRpb25JZEZyb21RdWVyeSA9IHNlYXJjaFBhcmFtcz8uZ2V0KCdjb252ZXJzYXRpb25JZCcpXG4gIGlmICghcGFyYW1zPy5hZ2VudElkKSB7XG4gICAgcmV0dXJuIDxkaXY+QWdlbnQgSUQga2jDtG5nIGjhu6NwIGzhu4c8L2Rpdj5cbiAgfVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gQ2hlY2sgZm9yIGxvZ2luIGFuZCBnZXQgYnVzaW5lc3MgSURcbiAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdXRoX3Rva2VuJylcbiAgICBzZXRJc0xvZ2dlZEluKCEhdG9rZW4pXG4gICAgXG4gICAgY29uc3QgY3VycmVudEJ1c2luZXNzSWQgPSBnZXRCdXNpbmVzc0lkKClcbiAgICBpZiAoY3VycmVudEJ1c2luZXNzSWQpIHtcbiAgICAgIHNldEJ1c2luZXNzSWQoY3VycmVudEJ1c2luZXNzSWQpXG4gICAgfVxuICB9LCBbXSlcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpc0xvZ2dlZEluICYmIGJ1c2luZXNzSWQgJiYgYWdlbnRJZCkge1xuICAgICAgY29uc29sZS5sb2coXCJGZXRjaGluZyBhZ2VudCBkZXRhaWxzIGFuZCBjb252ZXJzYXRpb24gd2l0aDpcIiwge1xuICAgICAgICBpc0xvZ2dlZEluLFxuICAgICAgICBidXNpbmVzc0lkLFxuICAgICAgICBhZ2VudElkLFxuICAgICAgICBjb252ZXJzYXRpb25JZEZyb21RdWVyeVxuICAgICAgfSk7XG4gICAgICBmZXRjaEFnZW50RGV0YWlscygpO1xuICAgICAgaWYgKGNvbnZlcnNhdGlvbklkRnJvbVF1ZXJ5KSB7XG4gICAgICAgIGZldGNoTWVzc2FnZXMoY29udmVyc2F0aW9uSWRGcm9tUXVlcnkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmV0Y2hPckNyZWF0ZUNvbnZlcnNhdGlvbigpO1xuICAgICAgfVxuICAgIH1cbiAgfSwgW2lzTG9nZ2VkSW4sIGJ1c2luZXNzSWQsIGFnZW50SWQsIGNvbnZlcnNhdGlvbklkRnJvbVF1ZXJ5XSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBTY3JvbGwgdG8gYm90dG9tIHdoZW4gbWVzc2FnZXMgY2hhbmdlXG4gICAgc2Nyb2xsVG9Cb3R0b20oKVxuICB9LCBbbWVzc2FnZXNdKVxuXG4gIGNvbnN0IHNjcm9sbFRvQm90dG9tID0gKCkgPT4ge1xuICAgIG1lc3NhZ2VzRW5kUmVmLmN1cnJlbnQ/LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6IFwic21vb3RoXCIgfSlcbiAgfVxuXG4gIC8vIERpc2FibGUgZXNsaW50IHdhcm5pbmcgZm9yIG1pc3NpbmcgZGVwZW5kZW5jaWVzXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgY29uc3QgZmV0Y2hBZ2VudERldGFpbHMgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2F1dGhfdG9rZW4nKVxuICAgICAgY29uc3QgYXBpVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBJX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDo4MDAxL2FwaSdcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coXCJGZXRjaGluZyBhZ2VudCBkZXRhaWxzOlwiLCB7XG4gICAgICAgIGFnZW50SWQsXG4gICAgICAgIGFwaVVybDogYCR7YXBpVXJsfS9haS1hZ2VudHMvJHthZ2VudElkfWBcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke2FwaVVybH0vYWktYWdlbnRzLyR7YWdlbnRJZH1gLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0b2tlbn1gLFxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICB9LFxuICAgICAgICBtb2RlOiAnY29ycycsXG4gICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZSdcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKFwiQWdlbnQgZGV0YWlscyByZXNwb25zZSBzdGF0dXM6XCIsIHJlc3BvbnNlLnN0YXR1cyk7XG4gICAgICBcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggYWdlbnQgZGV0YWlscycpXG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICAgIGNvbnNvbGUubG9nKFwiQWdlbnQgZGF0YSByZWNlaXZlZDpcIiwgZGF0YSk7XG4gICAgICBzZXRBZ2VudChkYXRhLmRhdGEpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGFnZW50IGRldGFpbHM6JywgZXJyb3IpXG4gICAgICB0b2FzdCh7XG4gICAgICAgIHRpdGxlOiBcIkVycm9yXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkZhaWxlZCB0byBsb2FkIEFJIGFnZW50LiBQbGVhc2UgdHJ5IGFnYWluLlwiLFxuICAgICAgICB2YXJpYW50OiBcImRlc3RydWN0aXZlXCJcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgY29uc3QgZmV0Y2hPckNyZWF0ZUNvbnZlcnNhdGlvbiA9IGFzeW5jICgpID0+IHtcbiAgICBzZXRJc0xvYWRpbmcodHJ1ZSlcbiAgICB0cnkge1xuICAgICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYXV0aF90b2tlbicpXG4gICAgICBjb25zdCBhcGlVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjgwMDEvYXBpJ1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhcIkZldGNoaW5nIGV4aXN0aW5nIGNvbnZlcnNhdGlvbnM6XCIsIHtcbiAgICAgICAgYWdlbnRJZCxcbiAgICAgICAgYnVzaW5lc3NJZCxcbiAgICAgICAgdXJsOiBgJHthcGlVcmx9L2FpLWNvbnZlcnNhdGlvbnM/YnVzaW5lc3NfaWQ9JHtidXNpbmVzc0lkfWBcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBUcnkgdG8gZmluZCBhbiBleGlzdGluZyBjb252ZXJzYXRpb24gd2l0aCB0aGlzIGFnZW50XG4gICAgICBjb25zdCByZXNwb25zZUV4aXN0aW5nID0gYXdhaXQgZmV0Y2goYCR7YXBpVXJsfS9haS1jb252ZXJzYXRpb25zP2J1c2luZXNzX2lkPSR7YnVzaW5lc3NJZH1gLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0b2tlbn1gLFxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICB9LFxuICAgICAgICBtb2RlOiAnY29ycycsXG4gICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZSdcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKFwiRXhpc3RpbmcgY29udmVyc2F0aW9ucyByZXNwb25zZSBzdGF0dXM6XCIsIHJlc3BvbnNlRXhpc3Rpbmcuc3RhdHVzKTtcbiAgICAgIFxuICAgICAgaWYgKCFyZXNwb25zZUV4aXN0aW5nLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGZldGNoIGNvbnZlcnNhdGlvbnMnKVxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBleGlzdGluZ0RhdGEgPSBhd2FpdCByZXNwb25zZUV4aXN0aW5nLmpzb24oKVxuICAgICAgY29uc29sZS5sb2coXCJFeGlzdGluZyBjb252ZXJzYXRpb25zOlwiLCBleGlzdGluZ0RhdGEpO1xuICAgICAgXG4gICAgICAvLyBJZiB0aGVyZSdzIGFuIGV4aXN0aW5nIGNvbnZlcnNhdGlvbiwgdXNlIGl0XG4gICAgICBpZiAoZXhpc3RpbmdEYXRhLmRhdGEgJiYgZXhpc3RpbmdEYXRhLmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBM4buNYyBjdeG7mWMgdHLDsiBjaHV54buHbiB24bubaSBhZ2VudCBoaeG7h24gdOG6oWlcbiAgICAgICAgY29uc3QgYWdlbnRDb252ZXJzYXRpb25zID0gZXhpc3RpbmdEYXRhLmRhdGEuZmlsdGVyKFxuICAgICAgICAgIChjb252OiBhbnkpID0+IGNvbnYuYWlfYWdlbnRfaWQgPT09IGFnZW50SWRcbiAgICAgICAgKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJBZ2VudCBjb252ZXJzYXRpb25zOlwiLCBhZ2VudENvbnZlcnNhdGlvbnMpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGFnZW50Q29udmVyc2F0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3QgY29udiA9IGFnZW50Q29udmVyc2F0aW9uc1swXTsgLy8gTOG6pXkgY3Xhu5ljIHRyw7IgY2h1eeG7h24gZ+G6p24gbmjhuqV0XG4gICAgICAgICAgc2V0Q29udmVyc2F0aW9uKGNvbnYpXG4gICAgICAgICAgYXdhaXQgZmV0Y2hNZXNzYWdlcyhjb252LmlkKVxuICAgICAgICAgIHNldElzTmV3Q29udmVyc2F0aW9uKGZhbHNlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEtow7RuZyB0w6xtIHRo4bqleSBjdeG7mWMgdHLDsiBjaHV54buHbiB24bubaSBhZ2VudCBuw6B5XG4gICAgICAgICAgc2V0SXNOZXdDb252ZXJzYXRpb24odHJ1ZSlcbiAgICAgICAgICBzZXRNZXNzYWdlcyhbXSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gT3RoZXJ3aXNlIGNyZWF0ZSBhIG5ldyBjb252ZXJzYXRpb25cbiAgICAgICAgc2V0SXNOZXdDb252ZXJzYXRpb24odHJ1ZSlcbiAgICAgICAgc2V0TWVzc2FnZXMoW10pXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nL2NyZWF0aW5nIGNvbnZlcnNhdGlvbjonLCBlcnJvcilcbiAgICAgIHRvYXN0KHtcbiAgICAgICAgdGl0bGU6IFwiRXJyb3JcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiRmFpbGVkIHRvIGxvYWQgY29udmVyc2F0aW9uLiBQbGVhc2UgdHJ5IGFnYWluLlwiLFxuICAgICAgICB2YXJpYW50OiBcImRlc3RydWN0aXZlXCJcbiAgICAgIH0pXG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSlcbiAgICB9XG4gIH1cblxuICBjb25zdCBmZXRjaE1lc3NhZ2VzID0gYXN5bmMgKGNvbnZlcnNhdGlvbklkOiBzdHJpbmcpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYXV0aF90b2tlbicpXG4gICAgICBjb25zdCBhcGlVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjgwMDEvYXBpJ1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhcIkZldGNoaW5nIG1lc3NhZ2VzIGZvciBjb252ZXJzYXRpb246XCIsIGNvbnZlcnNhdGlvbklkKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHthcGlVcmx9L2FpLWNvbnZlcnNhdGlvbnMvJHtjb252ZXJzYXRpb25JZH1gLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0b2tlbn1gLFxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICB9LFxuICAgICAgICBtb2RlOiAnY29ycycsXG4gICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZSdcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKFwiTWVzc2FnZXMgcmVzcG9uc2Ugc3RhdHVzOlwiLCByZXNwb25zZS5zdGF0dXMpO1xuICAgICAgXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGZldGNoIG1lc3NhZ2VzJylcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuICAgICAgY29uc29sZS5sb2coXCJNZXNzYWdlcyBkYXRhOlwiLCBkYXRhKTtcbiAgICAgIFxuICAgICAgLy8gQVBJIGPDsyB0aOG7gyB0cuG6oyB24buBIGPhuqV1IHRyw7pjIGtow6FjIG5oYXVcbiAgICAgIGlmIChkYXRhLm1lc3NhZ2VzKSB7XG4gICAgICAgIHNldE1lc3NhZ2VzKGRhdGEubWVzc2FnZXMpXG4gICAgICB9IGVsc2UgaWYgKGRhdGEuZGF0YSAmJiBkYXRhLmRhdGEubWVzc2FnZXMpIHtcbiAgICAgICAgc2V0TWVzc2FnZXMoZGF0YS5kYXRhLm1lc3NhZ2VzKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIlVuZXhwZWN0ZWQgbWVzc2FnZSBkYXRhIHN0cnVjdHVyZTpcIiwgZGF0YSk7XG4gICAgICAgIHNldE1lc3NhZ2VzKFtdKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBtZXNzYWdlczonLCBlcnJvcilcbiAgICAgIHRvYXN0KHtcbiAgICAgICAgdGl0bGU6IFwiRXJyb3JcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiRmFpbGVkIHRvIGxvYWQgbWVzc2FnZXMuIFBsZWFzZSB0cnkgYWdhaW4uXCIsXG4gICAgICAgIHZhcmlhbnQ6IFwiZGVzdHJ1Y3RpdmVcIlxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBjb25zdCBjcmVhdGVOZXdDb252ZXJzYXRpb24gPSBhc3luYyAoaW5pdGlhbE1lc3NhZ2U6IHN0cmluZykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdXRoX3Rva2VuJylcbiAgICAgIGNvbnN0IGFwaVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMS9hcGknXG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKFwiQ3JlYXRpbmcgbmV3IGNvbnZlcnNhdGlvbiB3aXRoOlwiLCB7XG4gICAgICAgIGFnZW50SWQsXG4gICAgICAgIGJ1c2luZXNzSWQsXG4gICAgICAgIGluaXRpYWxNZXNzYWdlLFxuICAgICAgICBhcGlVcmxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBmdWxsVXJsID0gYCR7YXBpVXJsfS9haS1jb252ZXJzYXRpb25zYDtcbiAgICAgIGNvbnNvbGUubG9nKFwiUE9TVCByZXF1ZXN0IHRvOlwiLCBmdWxsVXJsKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChmdWxsVXJsLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dG9rZW59YCxcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGFpX2FnZW50X2lkOiBhZ2VudElkLFxuICAgICAgICAgIGJ1c2luZXNzX2lkOiBidXNpbmVzc0lkLFxuICAgICAgICAgIGluaXRpYWxfbWVzc2FnZTogaW5pdGlhbE1lc3NhZ2VcbiAgICAgICAgfSksXG4gICAgICAgIG1vZGU6ICdjb3JzJyxcbiAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJ1xuICAgICAgfSlcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coXCJDcmVhdGUgY29udmVyc2F0aW9uIHJlc3BvbnNlIHN0YXR1czpcIiwgcmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgIFxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjcmVhdGluZyBjb252ZXJzYXRpb246XCIsIGVycm9yVGV4dCk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBjb252ZXJzYXRpb24nKVxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gICAgICBjb25zb2xlLmxvZyhcIkNvbnZlcnNhdGlvbiBjcmVhdGVkIHN1Y2Nlc3NmdWxseTpcIiwgZGF0YSk7XG4gICAgICBcbiAgICAgIGxldCBjb252ZXJzYXRpb25EYXRhO1xuICAgICAgaWYgKGRhdGEuZGF0YSkge1xuICAgICAgICBjb252ZXJzYXRpb25EYXRhID0gZGF0YS5kYXRhO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udmVyc2F0aW9uRGF0YSA9IGRhdGE7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHNldENvbnZlcnNhdGlvbihjb252ZXJzYXRpb25EYXRhKTtcbiAgICAgIFxuICAgICAgaWYgKGNvbnZlcnNhdGlvbkRhdGEuaWQpIHtcbiAgICAgICAgYXdhaXQgZmV0Y2hNZXNzYWdlcyhjb252ZXJzYXRpb25EYXRhLmlkKTtcbiAgICAgICAgc2V0SXNOZXdDb252ZXJzYXRpb24oZmFsc2UpO1xuICAgICAgICAvLyBDbGVhciBpbnB1dCBtZXNzYWdlIGFmdGVyIGNyZWF0aW5nIGNvbnZlcnNhdGlvblxuICAgICAgICBzZXRJbnB1dE1lc3NhZ2UoXCJcIik7XG4gICAgICAgIHJldHVybiBjb252ZXJzYXRpb25EYXRhLmlkO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgY29udmVyc2F0aW9uOicsIGVycm9yKVxuICAgICAgdG9hc3Qoe1xuICAgICAgICB0aXRsZTogXCJFcnJvclwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJGYWlsZWQgdG8gY3JlYXRlIGNvbnZlcnNhdGlvbi4gUGxlYXNlIHRyeSBhZ2Fpbi5cIixcbiAgICAgICAgdmFyaWFudDogXCJkZXN0cnVjdGl2ZVwiXG4gICAgICB9KVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gIH1cblxuICBjb25zdCBzZW5kTWVzc2FnZSA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoIWlucHV0TWVzc2FnZS50cmltKCkgJiYgZmlsZXMubGVuZ3RoID09PSAwKSByZXR1cm5cbiAgICBcbiAgICBzZXRJc1NlbmRpbmcodHJ1ZSlcbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYXV0aF90b2tlbicpXG4gICAgICBjb25zdCBhcGlVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjgwMDEvYXBpJ1xuICAgICAgbGV0IGNvbnZlcnNhdGlvbklkID0gY29udmVyc2F0aW9uPy5pZFxuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIGEgY29udmVyc2F0aW9uIG9yIG5lZWQgdG8gY3JlYXRlIG9uZVxuICAgICAgaWYgKCFjb252ZXJzYXRpb25JZCkge1xuICAgICAgICBhd2FpdCBjcmVhdGVOZXdDb252ZXJzYXRpb24oaW5wdXRNZXNzYWdlKVxuICAgICAgICBcbiAgICAgICAgaWYgKCFjb252ZXJzYXRpb25JZCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBjb252ZXJzYXRpb24nKVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBSZXNldCBpbnB1dCBhZnRlciBjcmVhdGluZyBjb252ZXJzYXRpb25cbiAgICAgICAgc2V0SW5wdXRNZXNzYWdlKFwiXCIpXG4gICAgICAgIHNldEZpbGVzKFtdKVxuICAgICAgICBzZXRJc1NlbmRpbmcoZmFsc2UpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDcmVhdGUgYSB0ZW1wb3JhcnkgdXNlciBtZXNzYWdlIHRvIGRpc3BsYXkgaW1tZWRpYXRlbHlcbiAgICAgIGNvbnN0IHVzZXJNZXNzYWdlOiBNZXNzYWdlID0ge1xuICAgICAgICBpZDogYHRlbXAtJHtEYXRlLm5vdygpfWAsXG4gICAgICAgIGFpX2NvbnZlcnNhdGlvbl9pZDogY29udmVyc2F0aW9uSWQsXG4gICAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgICAgY29udGVudDogaW5wdXRNZXNzYWdlLFxuICAgICAgICBpc19yZWFkOiB0cnVlLFxuICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIGEgdGVtcG9yYXJ5IGFzc2lzdGFudCBtZXNzYWdlIHdpdGggbG9hZGluZyBzdGF0ZVxuICAgICAgY29uc3QgdGVtcEFzc2lzdGFudE1lc3NhZ2U6IE1lc3NhZ2UgPSB7XG4gICAgICAgIGlkOiBgdGVtcC1yZXNwb25zZS0ke0RhdGUubm93KCl9YCxcbiAgICAgICAgYWlfY29udmVyc2F0aW9uX2lkOiBjb252ZXJzYXRpb25JZCxcbiAgICAgICAgcm9sZTogJ2Fzc2lzdGFudCcsXG4gICAgICAgIGNvbnRlbnQ6ICcnLFxuICAgICAgICBpc19yZWFkOiBmYWxzZSxcbiAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBsb2FkaW5nOiB0cnVlXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEFkZCB0ZW1wb3JhcnkgbWVzc2FnZXMgdG8gdGhlIFVJXG4gICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCB1c2VyTWVzc2FnZSwgdGVtcEFzc2lzdGFudE1lc3NhZ2VdKVxuICAgICAgXG4gICAgICAvLyBQcmVwYXJlIGZvcm0gZGF0YSBmb3IgdGhlIHJlcXVlc3RcbiAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKClcbiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnY29udGVudCcsIGlucHV0TWVzc2FnZSlcbiAgICAgIFxuICAgICAgLy8gQWRkIGZpbGVzIGlmIGFueVxuICAgICAgaWYgKGZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJBZGRpbmcgZmlsZXMgdG8gcmVxdWVzdDpcIiwgZmlsZXMubGVuZ3RoKTtcbiAgICAgICAgZmlsZXMuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGVzW10nLCBmaWxlKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDbGVhciBpbnB1dCBhbmQgZmlsZXNcbiAgICAgIHNldElucHV0TWVzc2FnZShcIlwiKVxuICAgICAgc2V0RmlsZXMoW10pXG4gICAgICBcbiAgICAgIC8vIFN0ZXAgMTogRmlyc3Qgc2VuZCB0aGUgbWVzc2FnZSB0byB0aGUgc3RyZWFtLXByZXBhcmUgZW5kcG9pbnQgdG8gZ2V0IGEgdG9rZW5cbiAgICAgIGNvbnN0IHByZXBhcmVSZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke2FwaVVybH0vYWktY29udmVyc2F0aW9ucy8ke2NvbnZlcnNhdGlvbklkfS9tZXNzYWdlcy9zdHJlYW0tcHJlcGFyZWAsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3Rva2VufWBcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGNvbnRlbnQ6IGlucHV0TWVzc2FnZVxuICAgICAgICB9KVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGlmICghcHJlcGFyZVJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHByZXBhcmUgc3RyZWFtaW5nIHNlc3Npb24nKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgcHJlcGFyZURhdGEgPSBhd2FpdCBwcmVwYXJlUmVzcG9uc2UuanNvbigpO1xuICAgICAgY29uc3Qgc3RyZWFtVG9rZW4gPSBwcmVwYXJlRGF0YS5zdHJlYW1fdG9rZW47XG4gICAgICBcbiAgICAgIGlmICghc3RyZWFtVG9rZW4pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBzdHJlYW0gdG9rZW4gcmVjZWl2ZWQnKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gU3RlcCAyOiBVc2UgdGhlIHN0cmVhbSB0b2tlbiB0byBjb25uZWN0IHRvIHRoZSBzdHJlYW1pbmcgZW5kcG9pbnRcbiAgICAgIGNvbnN0IHN0cmVhbVVybCA9IGAke2FwaVVybH0vYWktZGlyZWN0LXN0cmVhbS8ke3N0cmVhbVRva2VufWA7XG4gICAgICBjb25zb2xlLmxvZyhcIkNvbm5lY3RpbmcgdG8gc3RyZWFtaW5nIFVSTDpcIiwgc3RyZWFtVXJsKTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIEV2ZW50IFNvdXJjZSBmb3IgU1NFIChTZXJ2ZXItU2VudCBFdmVudHMpXG4gICAgICBjb25zdCBldmVudFNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZShzdHJlYW1VcmwpO1xuICAgICAgY29uc29sZS5sb2coXCJFdmVudFNvdXJjZSBjcmVhdGVkXCIpO1xuICAgICAgXG4gICAgICAvLyBIYW5kbGUgY29ubmVjdGlvbiBvcGVuXG4gICAgICBldmVudFNvdXJjZS5vbm9wZW4gPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJFdmVudFNvdXJjZSBjb25uZWN0aW9uIG9wZW5lZDpcIiwgZXZlbnQpO1xuICAgICAgfTtcbiAgICAgIFxuICAgICAgbGV0IHJlYWxVc2VyTWVzc2FnZUlkID0gcHJlcGFyZURhdGEubWVzc2FnZT8uaWQgfHwgJyc7XG4gICAgICBsZXQgcmVhbEFzc2lzdGFudE1lc3NhZ2VJZCA9ICcnO1xuICAgICAgXG4gICAgICAvLyBTZXQgdGhlIHVzZXIgbWVzc2FnZSB3aXRoIHRoZSBhY3R1YWwgSUQgZnJvbSB0aGUgc2VydmVyXG4gICAgICBpZiAocHJlcGFyZURhdGEubWVzc2FnZSkge1xuICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IHByZXYubWFwKG1zZyA9PiBcbiAgICAgICAgICBtc2cuaWQgPT09IHVzZXJNZXNzYWdlLmlkID8gey4uLnByZXBhcmVEYXRhLm1lc3NhZ2V9IDogbXNnXG4gICAgICAgICkpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBIYW5kbGUgc3RyZWFtIGV2ZW50c1xuICAgICAgZXZlbnRTb3VyY2Uub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiU3RyZWFtIGV2ZW50IHJlY2VpdmVkOlwiLCBldmVudC5kYXRhKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChldmVudC5kYXRhID09PSBcIltET05FXVwiKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJTdHJlYW0gY29tcGxldGUsIGNsb3NpbmcgY29ubmVjdGlvblwiKTtcbiAgICAgICAgICBldmVudFNvdXJjZS5jbG9zZSgpO1xuICAgICAgICAgIC8vIEPhuq1wIG5o4bqtdCB0cuG6oW5nIHRow6FpIGxvYWRpbmcga2hpIGhvw6BuIHRow6BuaFxuICAgICAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gcHJldi5tYXAobXNnID0+IFxuICAgICAgICAgICAgbXNnLmlkID09PSB0ZW1wQXNzaXN0YW50TWVzc2FnZS5pZCBcbiAgICAgICAgICAgICAgPyB7Li4ubXNnLCBsb2FkaW5nOiBmYWxzZX0gXG4gICAgICAgICAgICAgIDogbXNnXG4gICAgICAgICAgKSk7XG4gICAgICAgICAgc2V0SXNTZW5kaW5nKGZhbHNlKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJQYXJzZWQgc3RyZWFtIGRhdGE6XCIsIGRhdGEpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEhhbmRsZSBkYXRhIGZyb20gZGlyZWN0IHN0cmVhbWluZyBlbmRwb2ludFxuICAgICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdjaHVuaycpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVGV4dCBjaHVuayByZWNlaXZlZDpcIiwgZGF0YS5jb250ZW50KTtcbiAgICAgICAgICAgIC8vIEhp4buDbiB0aOG7iyBuZ2F5IGzhuq1wIHThu6ljIHThu6tuZyBjaHVuayB0ZXh0XG4gICAgICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZE1lc3NhZ2VzID0gcHJldi5tYXAobXNnID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobXNnLmlkID09PSB0ZW1wQXNzaXN0YW50TWVzc2FnZS5pZCkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgLi4ubXNnLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBtc2cuY29udGVudCArIGRhdGEuY29udGVudFxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1zZztcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHJldHVybiB1cGRhdGVkTWVzc2FnZXM7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gSGFuZGxlIGNvbXBsZXRpb24gZXZlbnQgZnJvbSBBc3Npc3RhbnRzIEFQSVxuICAgICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdjb21wbGV0ZScpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU3RyZWFtaW5nIGNvbXBsZXRlLCB3YWl0aW5nIGZvciBtZXNzYWdlIElEXCIpO1xuICAgICAgICAgICAgLy8gV2UnbGwga2VlcCB0aGUgbWVzc2FnZSBhcyBpcyB1bnRpbCB3ZSBnZXQgdGhlIG1lc3NhZ2Vfc2F2ZWQgZXZlbnRcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gSGFuZGxlIHNhdmVkIG1lc3NhZ2Ugd2l0aCBJRCBmcm9tIHRoZSBiYWNrZW5kXG4gICAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ21lc3NhZ2Vfc2F2ZWQnICYmIGRhdGEubWVzc2FnZV9pZCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJNZXNzYWdlIHNhdmVkIHdpdGggSUQ6XCIsIGRhdGEubWVzc2FnZV9pZCk7XG4gICAgICAgICAgICAvLyBVcGRhdGUgb3VyIHRlbXBvcmFyeSBtZXNzYWdlIHdpdGggdGhlIHJlYWwgb25lIGZyb20gdGhlIGRhdGFiYXNlXG4gICAgICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IHByZXYubWFwKG1zZyA9PiBcbiAgICAgICAgICAgICAgbXNnLmlkID09PSB0ZW1wQXNzaXN0YW50TWVzc2FnZS5pZCBcbiAgICAgICAgICAgICAgICA/IHsuLi5tc2csIGlkOiBkYXRhLm1lc3NhZ2VfaWQsIGxvYWRpbmc6IGZhbHNlfSBcbiAgICAgICAgICAgICAgICA6IG1zZ1xuICAgICAgICAgICAgKSk7XG4gICAgICAgICAgICBzZXRJc1NlbmRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBIYW5kbGUgZXJyb3IgZXZlbnRcbiAgICAgICAgICBpZiAoZGF0YS50eXBlID09PSAnZXJyb3InKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgcmVjZWl2ZWQ6XCIsIGRhdGEubWVzc2FnZSB8fCBkYXRhLmVycm9yKTtcbiAgICAgICAgICAgIHRvYXN0KHtcbiAgICAgICAgICAgICAgdGl0bGU6IFwiRXJyb3JcIixcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEubWVzc2FnZSB8fCBkYXRhLmVycm9yIHx8IFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgcHJvY2Vzc2luZyB5b3VyIG1lc3NhZ2UuXCIsXG4gICAgICAgICAgICAgIHZhcmlhbnQ6IFwiZGVzdHJ1Y3RpdmVcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgYXNzaXN0YW50IG1lc3NhZ2UgdG8gc2hvdyBlcnJvclxuICAgICAgICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBwcmV2Lm1hcChtc2cgPT4gXG4gICAgICAgICAgICAgIG1zZy5pZCA9PT0gdGVtcEFzc2lzdGFudE1lc3NhZ2UuaWQgXG4gICAgICAgICAgICAgICAgPyB7Li4ubXNnLCBjb250ZW50OiBkYXRhLm1lc3NhZ2UgfHwgXCJYaW4gbOG7l2ksIMSRw6MgeOG6o3kgcmEgbOG7l2kga2hpIHjhu60gbMO9IHRpbiBuaOG6r24uXCIsIGxvYWRpbmc6IGZhbHNlfSBcbiAgICAgICAgICAgICAgICA6IG1zZ1xuICAgICAgICAgICAgKSk7XG4gICAgICAgICAgICBzZXRJc1NlbmRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHByb2Nlc3Npbmcgc3RyZWFtIGV2ZW50OlwiLCBlcnIpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgXG4gICAgICBldmVudFNvdXJjZS5vbmVycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFdmVudFNvdXJjZSBlcnJvcjpcIiwgZXJyb3IpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGVycm9yIGlzIGR1ZSB0byB0aGUgdXNlciBub3QgYmVpbmcgYXV0aGVudGljYXRlZFxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFdmVudCAmJiAoZXJyb3IgYXMgYW55KS50YXJnZXQ/LnJlYWR5U3RhdGUgPT09IEV2ZW50U291cmNlLkNMT1NFRCkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFdmVudFNvdXJjZSBjb25uZWN0aW9uIGNsb3NlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZXZlbnRTb3VyY2UuY2xvc2UoKTtcbiAgICAgICAgc2V0SXNTZW5kaW5nKGZhbHNlKTtcbiAgICAgICAgXG4gICAgICAgIHRvYXN0KHtcbiAgICAgICAgICB0aXRsZTogXCJDb25uZWN0aW9uIEVycm9yXCIsXG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiQ291bGQgbm90IGVzdGFibGlzaCBzdHJlYW1pbmcgY29ubmVjdGlvbi4gUGxlYXNlIHRyeSBhZ2Fpbi5cIixcbiAgICAgICAgICB2YXJpYW50OiBcImRlc3RydWN0aXZlXCJcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgdGhlIGFzc2lzdGFudCBtZXNzYWdlIHRvIHNob3cgZXJyb3JcbiAgICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBwcmV2Lm1hcChtc2cgPT4gXG4gICAgICAgICAgbXNnLmlkID09PSB0ZW1wQXNzaXN0YW50TWVzc2FnZS5pZCBcbiAgICAgICAgICAgID8gey4uLm1zZywgY29udGVudDogXCJLaMO0bmcgdGjhu4Mga+G6v3QgbuG7kWkgdOG7m2kgbcOheSBjaOG7py4gVnVpIGzDsm5nIHRo4butIGzhuqFpIHNhdSBob+G6t2MgxJHEg25nIG5o4bqtcCBs4bqhaS5cIiwgbG9hZGluZzogZmFsc2V9IFxuICAgICAgICAgICAgOiBtc2dcbiAgICAgICAgKSk7XG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZW5kaW5nIG1lc3NhZ2U6JywgZXJyb3IpXG4gICAgICBzZXRJc1NlbmRpbmcoZmFsc2UpXG4gICAgICBcbiAgICAgIHRvYXN0KHtcbiAgICAgICAgdGl0bGU6IFwiRXJyb3JcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiRmFpbGVkIHRvIHNlbmQgbWVzc2FnZS4gUGxlYXNlIHRyeSBhZ2Fpbi5cIixcbiAgICAgICAgdmFyaWFudDogXCJkZXN0cnVjdGl2ZVwiXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZTogUmVhY3QuS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwiS2V5IGRvd24gZXZlbnQ6XCIsIGUua2V5KTtcbiAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgIWUuc2hpZnRLZXkpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgY29uc29sZS5sb2coXCJFbnRlciBrZXkgcHJlc3NlZCAod2l0aG91dCBzaGlmdClcIilcbiAgICAgIHNlbmRNZXNzYWdlKClcbiAgICB9XG4gIH1cblxuICBjb25zdCBoYW5kbGVGaWxlQ2xpY2sgPSAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJGaWxlIGJ1dHRvbiBjbGlja2VkXCIpO1xuICAgIGZpbGVJbnB1dFJlZi5jdXJyZW50Py5jbGljaygpXG4gIH1cblxuICBjb25zdCBoYW5kbGVGaWxlQ2hhbmdlID0gKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJGaWxlIGlucHV0IGNoYW5nZWRcIik7XG4gICAgaWYgKGUudGFyZ2V0LmZpbGVzKSB7XG4gICAgICBjb25zdCBuZXdGaWxlcyA9IEFycmF5LmZyb20oZS50YXJnZXQuZmlsZXMpXG4gICAgICBjb25zb2xlLmxvZyhcIlNlbGVjdGVkIGZpbGVzOlwiLCBuZXdGaWxlcy5tYXAoZiA9PiBmLm5hbWUpKTtcbiAgICAgIHNldEZpbGVzKHByZXYgPT4gWy4uLnByZXYsIC4uLm5ld0ZpbGVzXSlcbiAgICB9XG4gIH1cblxuICBjb25zdCByZW1vdmVGaWxlID0gKGluZGV4OiBudW1iZXIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcIlJlbW92aW5nIGZpbGUgYXQgaW5kZXg6XCIsIGluZGV4KTtcbiAgICBzZXRGaWxlcyhwcmV2ID0+IHByZXYuZmlsdGVyKChfLCBpKSA9PiBpICE9PSBpbmRleCkpXG4gIH1cblxuICBjb25zdCBmb3JtYXRUaW1lID0gKGRhdGVTdHJpbmc6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShkYXRlU3RyaW5nKVxuICAgIHJldHVybiBkYXRlLnRvTG9jYWxlVGltZVN0cmluZyhbXSwgeyBob3VyOiAnMi1kaWdpdCcsIG1pbnV0ZTogJzItZGlnaXQnIH0pXG4gIH1cblxuICBpZiAoIWlzTG9nZ2VkSW4pIHtcbiAgICByZXR1cm4gKFxuICAgICAgPEFwcFNoZWxsPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lciBteC1hdXRvIHB5LTZcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtOCBiZy15ZWxsb3ctNTAgYm9yZGVyIGJvcmRlci15ZWxsb3ctMzAwIHJvdW5kZWQtbWRcIj5cbiAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgbWItMlwiPkLhuqFuIGPhuqduIMSRxINuZyBuaOG6rXAgdHLGsOG7m2M8L2gzPlxuICAgICAgICAgICAgPHA+VnVpIGzDsm5nIDxhIGhyZWY9XCIvbG9naW5cIiBjbGFzc05hbWU9XCJ0ZXh0LWJsdWUtNjAwIGhvdmVyOnVuZGVybGluZVwiPsSRxINuZyBuaOG6rXA8L2E+IMSR4buDIHPhu60gZOG7pW5nIHTDrW5oIG7Eg25nIG7DoHkuPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvQXBwU2hlbGw+XG4gICAgKVxuICB9XG5cbiAgaWYgKCFidXNpbmVzc0lkKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxBcHBTaGVsbD5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXIgbXgtYXV0byBweS02XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTggYmcteWVsbG93LTUwIGJvcmRlciBib3JkZXIteWVsbG93LTMwMCByb3VuZGVkLW1kXCI+XG4gICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LXNlbWlib2xkIG1iLTJcIj5DaOG7jW4gZG9hbmggbmdoaeG7h3A8L2gzPlxuICAgICAgICAgICAgPHA+VnVpIGzDsm5nIGNo4buNbiBt4buZdCBkb2FuaCBuZ2hp4buHcCDEkeG7gyBjaGF0IHbhu5tpIEFJIEFnZW50LjwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L0FwcFNoZWxsPlxuICAgIClcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPEFwcFNoZWxsPlxuICAgICAgPHN0eWxlIGpzeCBnbG9iYWw+e2BcbiAgICAgICAgLnR5cGluZy1pbmRpY2F0b3Ige1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnR5cGluZy1pbmRpY2F0b3Igc3BhbiB7XG4gICAgICAgICAgaGVpZ2h0OiA4cHg7XG4gICAgICAgICAgd2lkdGg6IDhweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiBjdXJyZW50Q29sb3I7XG4gICAgICAgICAgb3BhY2l0eTogMC42O1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgICAgICBtYXJnaW46IDAgMnB4O1xuICAgICAgICAgIGFuaW1hdGlvbjogYm91bmNlIDEuNXMgaW5maW5pdGUgZWFzZS1pbi1vdXQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC50eXBpbmctaW5kaWNhdG9yIHNwYW46bnRoLWNoaWxkKDEpIHtcbiAgICAgICAgICBhbmltYXRpb24tZGVsYXk6IDBzO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAudHlwaW5nLWluZGljYXRvciBzcGFuOm50aC1jaGlsZCgyKSB7XG4gICAgICAgICAgYW5pbWF0aW9uLWRlbGF5OiAwLjJzO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAudHlwaW5nLWluZGljYXRvciBzcGFuOm50aC1jaGlsZCgzKSB7XG4gICAgICAgICAgYW5pbWF0aW9uLWRlbGF5OiAwLjRzO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBAa2V5ZnJhbWVzIGJvdW5jZSB7XG4gICAgICAgICAgMCUsIDYwJSwgMTAwJSB7XG4gICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIDMwJSB7XG4gICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTRweCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICR7bWFya2Rvd25TdHlsZXN9XG4gICAgICBgfTwvc3R5bGU+XG4gICAgICBcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBoLVtjYWxjKDEwMHZoLTRyZW0pXVwiPlxuICAgICAgICB7LyogQ2hhdCBoZWFkZXIgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYm9yZGVyLWIgcC00IGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTNcIj5cbiAgICAgICAgICAgIDxCdXR0b24gdmFyaWFudD1cImdob3N0XCIgY2xhc3NOYW1lPVwibXItMSBwLTIgaC05IHctOVwiIGFzQ2hpbGQ+XG4gICAgICAgICAgICAgIDxMaW5rIGhyZWY9XCIvYWlcIj5cbiAgICAgICAgICAgICAgICA8QXJyb3dMZWZ0SWNvbiBjbGFzc05hbWU9XCJoLTQgdy00XCIgLz5cbiAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxBdmF0YXIgY2xhc3NOYW1lPVwiaC05IHctOVwiPlxuICAgICAgICAgICAgICB7YWdlbnQ/LmF2YXRhciA/IChcbiAgICAgICAgICAgICAgICA8QXZhdGFySW1hZ2UgXG4gICAgICAgICAgICAgICAgICBzcmM9e2FnZW50LmF2YXRhci5zdGFydHNXaXRoKCdodHRwJykgXG4gICAgICAgICAgICAgICAgICAgID8gYWdlbnQuYXZhdGFyIFxuICAgICAgICAgICAgICAgICAgICA6IGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9VUkw/LnJlcGxhY2UoJy9hcGknLCAnJyl9L3N0b3JhZ2UvJHthZ2VudC5hdmF0YXJ9YH1cbiAgICAgICAgICAgICAgICAgIGFsdD17YWdlbnQ/Lm5hbWUgfHwgJ0FJIEFnZW50J31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIDxBdmF0YXJGYWxsYmFjaz57YWdlbnQ/Lm5hbWU/LnN1YnN0cmluZygwLCAyKS50b1VwcGVyQ2FzZSgpIHx8ICdBSSd9PC9BdmF0YXJGYWxsYmFjaz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvQXZhdGFyPlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCB0ZXh0LXNtXCI+e2FnZW50Py5uYW1lIHx8ICdBSSBBZ2VudCd9PC9oMj5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LW11dGVkLWZvcmVncm91bmRcIj5cbiAgICAgICAgICAgICAgICB7Y29udmVyc2F0aW9uPy50aXRsZSB8fCAnTmV3IGNvbnZlcnNhdGlvbid9XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIFxuICAgICAgICAgIHsvKiBEZWJ1ZyBpbmZvICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LW11dGVkLWZvcmVncm91bmRcIj5cbiAgICAgICAgICAgIDxwPkFQSToge3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9VUkwgfHwgJ05vdCBzZXQnfTwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBcbiAgICAgICAgICA8VG9vbHRpcFByb3ZpZGVyPlxuICAgICAgICAgICAgPFRvb2x0aXA+XG4gICAgICAgICAgICAgIDxUb29sdGlwVHJpZ2dlciBhc0NoaWxkPlxuICAgICAgICAgICAgICAgIDxCdXR0b24gXG4gICAgICAgICAgICAgICAgICB2YXJpYW50PVwiZ2hvc3RcIiBcbiAgICAgICAgICAgICAgICAgIHNpemU9XCJpY29uXCIgXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtmZXRjaE9yQ3JlYXRlQ29udmVyc2F0aW9ufVxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzTG9hZGluZ31cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8UmVmcmVzaEN3SWNvbiBjbGFzc05hbWU9XCJoLTQgdy00XCIgLz5cbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC9Ub29sdGlwVHJpZ2dlcj5cbiAgICAgICAgICAgICAgPFRvb2x0aXBDb250ZW50PlxuICAgICAgICAgICAgICAgIDxwPlN0YXJ0IG5ldyBjb252ZXJzYXRpb248L3A+XG4gICAgICAgICAgICAgIDwvVG9vbHRpcENvbnRlbnQ+XG4gICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgPC9Ub29sdGlwUHJvdmlkZXI+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICBcbiAgICAgICAgey8qIENoYXQgbWVzc2FnZXMgKi99XG4gICAgICAgIDxTY3JvbGxBcmVhIGNsYXNzTmFtZT1cImZsZXgtMSBwLTRcIj5cbiAgICAgICAgICB7aXNMb2FkaW5nID8gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktY2VudGVyIGl0ZW1zLWNlbnRlciBoLWZ1bGxcIj5cbiAgICAgICAgICAgICAgPExvYWRlcjJJY29uIGNsYXNzTmFtZT1cImgtOCB3LTggYW5pbWF0ZS1zcGluIHRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApIDogbWVzc2FnZXMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGp1c3RpZnktY2VudGVyIGl0ZW1zLWNlbnRlciBoLWZ1bGwgdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1wcmltYXJ5LzEwIHAtNCByb3VuZGVkLWZ1bGwgbWItNFwiPlxuICAgICAgICAgICAgICAgIDxBdmF0YXIgY2xhc3NOYW1lPVwiaC0xMiB3LTEyXCI+XG4gICAgICAgICAgICAgICAgICB7YWdlbnQ/LmF2YXRhciA/IChcbiAgICAgICAgICAgICAgICAgICAgPEF2YXRhckltYWdlIFxuICAgICAgICAgICAgICAgICAgICAgIHNyYz17YWdlbnQuYXZhdGFyLnN0YXJ0c1dpdGgoJ2h0dHAnKSBcbiAgICAgICAgICAgICAgICAgICAgICAgID8gYWdlbnQuYXZhdGFyIFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfVVJMPy5yZXBsYWNlKCcvYXBpJywgJycpfS9zdG9yYWdlLyR7YWdlbnQuYXZhdGFyfWB9XG4gICAgICAgICAgICAgICAgICAgICAgYWx0PXthZ2VudD8ubmFtZSB8fCAnQUkgQWdlbnQnfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgPEF2YXRhckZhbGxiYWNrPnthZ2VudD8ubmFtZT8uc3Vic3RyaW5nKDAsIDIpLnRvVXBwZXJDYXNlKCkgfHwgJ0FJJ308L0F2YXRhckZhbGxiYWNrPlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L0F2YXRhcj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtbWVkaXVtIG1iLTJcIj5TdGFydCBjaGF0dGluZyB3aXRoIHthZ2VudD8ubmFtZX08L2gzPlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LW11dGVkLWZvcmVncm91bmQgbWF4LXctbWQgbWItNlwiPlxuICAgICAgICAgICAgICAgIHthZ2VudD8uZGVzY3JpcHRpb24gfHwgJ0FzayBhbnkgcXVlc3Rpb25zIG9yIHN0YXJ0IGEgY29udmVyc2F0aW9uLid9XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNCBwYi00XCI+XG4gICAgICAgICAgICAgIHttZXNzYWdlcy5maWx0ZXIobSA9PiBtLnJvbGUgIT09ICdzeXN0ZW0nKS5tYXAoKG1lc3NhZ2UpID0+IChcbiAgICAgICAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgICAgICAga2V5PXttZXNzYWdlLmlkfSBcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXggJHttZXNzYWdlLnJvbGUgPT09ICd1c2VyJyA/ICdqdXN0aWZ5LWVuZCcgOiAnanVzdGlmeS1zdGFydCd9YH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YGZsZXggZ2FwLTMgbWF4LXctWzgwJV0gJHttZXNzYWdlLnJvbGUgPT09ICd1c2VyJyA/ICdmbGV4LXJvdy1yZXZlcnNlJyA6ICcnfWB9PlxuICAgICAgICAgICAgICAgICAgICA8QXZhdGFyIGNsYXNzTmFtZT1cImgtOCB3LTggZmxleC1zaHJpbmstMCBtdC0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAge21lc3NhZ2Uucm9sZSA9PT0gJ3VzZXInID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPEF2YXRhckZhbGxiYWNrPk1lPC9BdmF0YXJGYWxsYmFjaz5cbiAgICAgICAgICAgICAgICAgICAgICApIDogYWdlbnQ/LmF2YXRhciA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxBdmF0YXJJbWFnZSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPXthZ2VudC5hdmF0YXIuc3RhcnRzV2l0aCgnaHR0cCcpIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYWdlbnQuYXZhdGFyIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBJX1VSTD8ucmVwbGFjZSgnL2FwaScsICcnKX0vc3RvcmFnZS8ke2FnZW50LmF2YXRhcn1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBhbHQ9e2FnZW50Py5uYW1lIHx8ICdBSSd9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8QXZhdGFyRmFsbGJhY2s+e2FnZW50Py5uYW1lPy5zdWJzdHJpbmcoMCwgMikudG9VcHBlckNhc2UoKSB8fCAnQUknfTwvQXZhdGFyRmFsbGJhY2s+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9BdmF0YXI+XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxDYXJkIGNsYXNzTmFtZT17YCR7bWVzc2FnZS5yb2xlID09PSAndXNlcicgPyAnYmctcHJpbWFyeSB0ZXh0LXByaW1hcnktZm9yZWdyb3VuZCcgOiAnYmctbXV0ZWQnfWB9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPENhcmRDb250ZW50IGNsYXNzTmFtZT1cInAtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7bWVzc2FnZS5sb2FkaW5nID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TWFya2Rvd25Db250ZW50IGNvbnRlbnQ9e21lc3NhZ2UuY29udGVudH0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMSBmbGV4XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidHlwaW5nLWluZGljYXRvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxNYXJrZG93bkNvbnRlbnQgY29udGVudD17bWVzc2FnZS5jb250ZW50fSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIERpc3BsYXkgZmlsZXMgaWYgYW55ICovfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7bWVzc2FnZS5maWxlcyAmJiBtZXNzYWdlLmZpbGVzLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMiBncmlkIGdhcC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bWVzc2FnZS5maWxlcy5tYXAoKGZpbGUsIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aW5kZXh9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9e2ZpbGV9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldD1cIl9ibGFua1wiIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbD1cIm5vb3BlbmVyIG5vcmVmZXJyZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHAtMiByb3VuZGVkIGJnLWJhY2tncm91bmQvNTAgaG92ZXI6YmctYmFja2dyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UGFwZXJjbGlwSWNvbiBjbGFzc05hbWU9XCJoLTQgdy00XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRydW5jYXRlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICdGaWxlJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9DYXJkQ29udGVudD5cbiAgICAgICAgICAgICAgICAgICAgICA8L0NhcmQ+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2B0ZXh0LXhzIHRleHQtbXV0ZWQtZm9yZWdyb3VuZCBtdC0xICR7bWVzc2FnZS5yb2xlID09PSAndXNlcicgPyAndGV4dC1yaWdodCcgOiAnJ31gfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtmb3JtYXRUaW1lKG1lc3NhZ2UuY3JlYXRlZF9hdCl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICA8ZGl2IHJlZj17bWVzc2FnZXNFbmRSZWZ9IC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L1Njcm9sbEFyZWE+XG4gICAgICAgIFxuICAgICAgICB7LyogU2VsZWN0ZWQgZmlsZXMgKi99XG4gICAgICAgIHtmaWxlcy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB4LTQgcHQtMlwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtd3JhcCBnYXAtMlwiPlxuICAgICAgICAgICAgICB7ZmlsZXMubWFwKChmaWxlLCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgICAgIDxkaXYga2V5PXtpbmRleH0gY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEgYmctbXV0ZWQgcC0xIHJvdW5kZWQgdGV4dC14c1wiPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidHJ1bmNhdGUgbWF4LXctWzEwMHB4XVwiPntmaWxlLm5hbWV9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFudD1cImdob3N0XCIgXG4gICAgICAgICAgICAgICAgICAgIHNpemU9XCJpY29uXCIgXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtNCB3LTQgcm91bmRlZC1mdWxsXCJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gcmVtb3ZlRmlsZShpbmRleCl9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPsOXPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICAgIFxuICAgICAgICB7LyogTWVzc2FnZSBpbnB1dCAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItdCBwLTRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlIGZsZXhcIj5cbiAgICAgICAgICAgIDxpbnB1dCBcbiAgICAgICAgICAgICAgdHlwZT1cImZpbGVcIiBcbiAgICAgICAgICAgICAgcmVmPXtmaWxlSW5wdXRSZWZ9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVGaWxlQ2hhbmdlfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoaWRkZW5cIlxuICAgICAgICAgICAgICBtdWx0aXBsZVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiVHlwZSBhIG1lc3NhZ2UuLi5cIlxuICAgICAgICAgICAgICB2YWx1ZT17aW5wdXRNZXNzYWdlfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldElucHV0TWVzc2FnZShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgIG9uS2V5RG93bj17aGFuZGxlS2V5RG93bn1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzU2VuZGluZyB8fCBpc0xvYWRpbmd9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInByLTI0XCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgcmlnaHQtMSB0b3AtMSBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMVwiPlxuICAgICAgICAgICAgICB7YWdlbnQ/LmNhcGFiaWxpdGllcz8uaW5jbHVkZXMoJ2ltYWdlX3VwbG9hZCcpICYmIChcbiAgICAgICAgICAgICAgICA8VG9vbHRpcFByb3ZpZGVyPlxuICAgICAgICAgICAgICAgICAgPFRvb2x0aXA+XG4gICAgICAgICAgICAgICAgICAgIDxUb29sdGlwVHJpZ2dlciBhc0NoaWxkPlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCIgXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplPVwiaWNvblwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD1cImdob3N0XCIgXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoLTggdy04XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUZpbGVDbGlja31cbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc1NlbmRpbmd9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEltYWdlSWNvbiBjbGFzc05hbWU9XCJoLTQgdy00XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwVHJpZ2dlcj5cbiAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXBDb250ZW50PlxuICAgICAgICAgICAgICAgICAgICAgIDxwPlVwbG9hZCBpbWFnZXM8L3A+XG4gICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAgPC9Ub29sdGlwUHJvdmlkZXI+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICB7YWdlbnQ/LmNhcGFiaWxpdGllcz8uaW5jbHVkZXMoJ3ZvaWNlJykgJiYgKFxuICAgICAgICAgICAgICAgIDxUb29sdGlwUHJvdmlkZXI+XG4gICAgICAgICAgICAgICAgICA8VG9vbHRpcD5cbiAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXBUcmlnZ2VyIGFzQ2hpbGQ+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIiBcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJpY29uXCIgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PVwiZ2hvc3RcIiBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtOCB3LThcIlxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3RydWV9IC8vIFZvaWNlIGZlYXR1cmUgbm90IHlldCBpbXBsZW1lbnRlZFxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxNaWNJY29uIGNsYXNzTmFtZT1cImgtNCB3LTRcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXBUcmlnZ2VyPlxuICAgICAgICAgICAgICAgICAgICA8VG9vbHRpcENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICAgICAgPHA+Vm9pY2UgbWVzc2FnZSAoY29taW5nIHNvb24pPC9wPlxuICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXBDb250ZW50PlxuICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICAgIDwvVG9vbHRpcFByb3ZpZGVyPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgPEJ1dHRvbiBcbiAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCIgXG4gICAgICAgICAgICAgICAgc2l6ZT1cImljb25cIiBcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoLTggdy04XCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlNlbmQgYnV0dG9uIGNsaWNrZWRcIik7XG4gICAgICAgICAgICAgICAgICBzZW5kTWVzc2FnZSgpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzU2VuZGluZyB8fCAoaW5wdXRNZXNzYWdlLnRyaW0oKSA9PT0gJycgJiYgZmlsZXMubGVuZ3RoID09PSAwKX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtpc1NlbmRpbmcgPyAoXG4gICAgICAgICAgICAgICAgICA8TG9hZGVyMkljb24gY2xhc3NOYW1lPVwiaC00IHctNCBhbmltYXRlLXNwaW5cIiAvPlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICA8U2VuZEljb24gY2xhc3NOYW1lPVwiaC00IHctNFwiIC8+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L0FwcFNoZWxsPlxuICApXG59ICJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZVBhcmFtcyIsInVzZVJvdXRlciIsInVzZVNlYXJjaFBhcmFtcyIsIkFwcFNoZWxsIiwiQnV0dG9uIiwiSW5wdXQiLCJBdmF0YXIiLCJBdmF0YXJGYWxsYmFjayIsIkF2YXRhckltYWdlIiwiQ2FyZCIsIkNhcmRDb250ZW50IiwiVG9vbHRpcCIsIlRvb2x0aXBDb250ZW50IiwiVG9vbHRpcFByb3ZpZGVyIiwiVG9vbHRpcFRyaWdnZXIiLCJTY3JvbGxBcmVhIiwiQXJyb3dMZWZ0SWNvbiIsIlNlbmRJY29uIiwiTWljSWNvbiIsIkltYWdlSWNvbiIsIlBhcGVyY2xpcEljb24iLCJSZWZyZXNoQ3dJY29uIiwiTG9hZGVyMkljb24iLCJ1c2VUb2FzdCIsIkxpbmsiLCJnZXRCdXNpbmVzc0lkIiwiUmVhY3RNYXJrZG93biIsInJlbWFya0dmbSIsIlByaXNtIiwiU3ludGF4SGlnaGxpZ2h0ZXIiLCJ0b21vcnJvdyIsIm1hcmtkb3duU3R5bGVzIiwicCIsImgxIiwiaDIiLCJoMyIsImg0IiwiaDUiLCJoNiIsInVsIiwib2wiLCJsaSIsImNvZGUiLCJwcmUiLCJibG9ja3F1b3RlIiwiYSIsInRhYmxlIiwidGhlYWQiLCJ0aCIsInRkIiwibWFya2Rvd25Db21wb25lbnRzIiwiY2hpbGRyZW4iLCJjbGFzc05hbWUiLCJub2RlIiwiaW5saW5lIiwicHJvcHMiLCJtYXRjaCIsImV4ZWMiLCJzdHlsZSIsImxhbmd1YWdlIiwiUHJlVGFnIiwiU3RyaW5nIiwicmVwbGFjZSIsImhyZWYiLCJ0YXJnZXQiLCJyZWwiLCJNYXJrZG93bkNvbnRlbnQiLCJjb250ZW50IiwiZGl2IiwicmVtYXJrUGx1Z2lucyIsImNvbXBvbmVudHMiLCJDaGF0UGFnZSIsInByb2Nlc3MiLCJhZ2VudCIsInBhcmFtcyIsInJvdXRlciIsInNlYXJjaFBhcmFtcyIsInRvYXN0Iiwic2V0QWdlbnQiLCJjb252ZXJzYXRpb24iLCJzZXRDb252ZXJzYXRpb24iLCJtZXNzYWdlcyIsInNldE1lc3NhZ2VzIiwiaW5wdXRNZXNzYWdlIiwic2V0SW5wdXRNZXNzYWdlIiwiaXNMb2FkaW5nIiwic2V0SXNMb2FkaW5nIiwiaXNTZW5kaW5nIiwic2V0SXNTZW5kaW5nIiwiaXNOZXdDb252ZXJzYXRpb24iLCJzZXRJc05ld0NvbnZlcnNhdGlvbiIsImlzTG9nZ2VkSW4iLCJzZXRJc0xvZ2dlZEluIiwiYnVzaW5lc3NJZCIsInNldEJ1c2luZXNzSWQiLCJmaWxlcyIsInNldEZpbGVzIiwibWVzc2FnZXNFbmRSZWYiLCJmaWxlSW5wdXRSZWYiLCJhZ2VudElkIiwiY29udmVyc2F0aW9uSWRGcm9tUXVlcnkiLCJnZXQiLCJ0b2tlbiIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJjdXJyZW50QnVzaW5lc3NJZCIsImNvbnNvbGUiLCJsb2ciLCJmZXRjaEFnZW50RGV0YWlscyIsImZldGNoTWVzc2FnZXMiLCJmZXRjaE9yQ3JlYXRlQ29udmVyc2F0aW9uIiwic2Nyb2xsVG9Cb3R0b20iLCJjdXJyZW50Iiwic2Nyb2xsSW50b1ZpZXciLCJiZWhhdmlvciIsImFwaVVybCIsImVudiIsIk5FWFRfUFVCTElDX0FQSV9VUkwiLCJyZXNwb25zZSIsImZldGNoIiwiaGVhZGVycyIsIm1vZGUiLCJjcmVkZW50aWFscyIsInN0YXR1cyIsIm9rIiwiRXJyb3IiLCJkYXRhIiwianNvbiIsImVycm9yIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInZhcmlhbnQiLCJ1cmwiLCJyZXNwb25zZUV4aXN0aW5nIiwiZXhpc3RpbmdEYXRhIiwibGVuZ3RoIiwiYWdlbnRDb252ZXJzYXRpb25zIiwiZmlsdGVyIiwiY29udiIsImFpX2FnZW50X2lkIiwiaWQiLCJjb252ZXJzYXRpb25JZCIsImNyZWF0ZU5ld0NvbnZlcnNhdGlvbiIsImluaXRpYWxNZXNzYWdlIiwiZnVsbFVybCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYnVzaW5lc3NfaWQiLCJpbml0aWFsX21lc3NhZ2UiLCJlcnJvclRleHQiLCJ0ZXh0IiwiY29udmVyc2F0aW9uRGF0YSIsInNlbmRNZXNzYWdlIiwidHJpbSIsInByZXBhcmVEYXRhIiwidXNlck1lc3NhZ2UiLCJEYXRlIiwibm93IiwiYWlfY29udmVyc2F0aW9uX2lkIiwicm9sZSIsImlzX3JlYWQiLCJjcmVhdGVkX2F0IiwidG9JU09TdHJpbmciLCJ0ZW1wQXNzaXN0YW50TWVzc2FnZSIsImxvYWRpbmciLCJwcmV2IiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsImZvckVhY2giLCJmaWxlIiwicHJlcGFyZVJlc3BvbnNlIiwic3RyZWFtVG9rZW4iLCJzdHJlYW1fdG9rZW4iLCJzdHJlYW1VcmwiLCJldmVudFNvdXJjZSIsIkV2ZW50U291cmNlIiwib25vcGVuIiwiZXZlbnQiLCJyZWFsVXNlck1lc3NhZ2VJZCIsIm1lc3NhZ2UiLCJyZWFsQXNzaXN0YW50TWVzc2FnZUlkIiwibWFwIiwibXNnIiwib25tZXNzYWdlIiwiY2xvc2UiLCJwYXJzZSIsInR5cGUiLCJ1cGRhdGVkTWVzc2FnZXMiLCJtZXNzYWdlX2lkIiwiZXJyIiwib25lcnJvciIsIkV2ZW50IiwicmVhZHlTdGF0ZSIsIkNMT1NFRCIsImhhbmRsZUtleURvd24iLCJlIiwia2V5Iiwic2hpZnRLZXkiLCJwcmV2ZW50RGVmYXVsdCIsImhhbmRsZUZpbGVDbGljayIsImNsaWNrIiwiaGFuZGxlRmlsZUNoYW5nZSIsIm5ld0ZpbGVzIiwiQXJyYXkiLCJmcm9tIiwiZiIsIm5hbWUiLCJyZW1vdmVGaWxlIiwiaW5kZXgiLCJfIiwiaSIsImZvcm1hdFRpbWUiLCJkYXRlU3RyaW5nIiwiZGF0ZSIsInRvTG9jYWxlVGltZVN0cmluZyIsImhvdXIiLCJtaW51dGUiLCJhc0NoaWxkIiwiYXZhdGFyIiwic3JjIiwic3RhcnRzV2l0aCIsImFsdCIsInN1YnN0cmluZyIsInRvVXBwZXJDYXNlIiwic2l6ZSIsIm9uQ2xpY2siLCJkaXNhYmxlZCIsIm0iLCJzcGFuIiwic3BsaXQiLCJwb3AiLCJyZWYiLCJpbnB1dCIsIm9uQ2hhbmdlIiwibXVsdGlwbGUiLCJwbGFjZWhvbGRlciIsInZhbHVlIiwib25LZXlEb3duIiwiY2FwYWJpbGl0aWVzIiwiaW5jbHVkZXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/ai/[agentId]/chat/page.tsx\n"));

/***/ })

});